<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>CSL: /Content/Code/CSL/CSL/Kernel/CSL_Core.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CSL
   &#160;<span id="projectnumber">6.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_c_s_l___core_8cpp_source.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">CSL_Core.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_c_s_l___core_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//  CSL_Core.cpp -- the implementation of Buffer, UnitGenerator, IO, mix-ins, etc.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//  See the copyright notice and acknowledgment of authors in the file COPYRIGHT</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_c_s_l___core_8h.html">CSL_Core.h</a>&quot;</span>   <span class="comment">// it&#39;s all declared here</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//#include &quot;RingBuffer.h&quot;   // UnitGenerator uses RingBuffers</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span>     <span class="comment">// for bzero / memset</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span>     <span class="comment">// for malloc</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// Sound files</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#ifdef USE_JSND</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">    #include &quot;<a class="code" href="_sound_file_j_8h.html">SoundFileJ.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#ifdef USE_LSND</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">    #include &quot;<a class="code" href="_sound_file_l_8h.html">SoundFileL.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">    #include &lt;samplerate.h&gt;</span>         <span class="comment">// libsamplerate header file</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#ifdef USE_CASND</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">    #include &quot;<a class="code" href="_sound_file_c_a_8h.html">SoundFileCA.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacecsl.html">csl</a>;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#ifdef WIN32            // Windows doesn&#39;t have rintf</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#define rint(x) ((int)(x + 0.5f))</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">// Basic buffer methods</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#pragma mark Buffer</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">// Constructor with size args does not allocate</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#a95f21039ad600c844f3ba7e5ae421d47">   42</a></span>&#160;<a class="code" href="classcsl_1_1_buffer.html#a95f21039ad600c844f3ba7e5ae421d47">Buffer::Buffer</a>(<span class="keywordtype">unsigned</span> numChannels, <span class="keywordtype">unsigned</span> numFrames) :</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        mNumChannels(0),</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        mNumFrames(0),</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        mNumAlloc(0),</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        mMonoBufferByteSize(0),</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        mSequence(0),</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        mAreBuffersAllocated(false),</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        mDidIAllocateBuffers(false),</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        mIsPopulated(false),</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        mAreBuffersZero(true),</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        mType(<a class="code" href="namespacecsl.html#a5af458483d71530692674c12d94d67e7af150be1bd16d08aba03503029871090d">kSamples</a>),</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        mBuffers(0) {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html#a8c25c9f605b0cdebd4626bf4795b286d">setSize</a>(numChannels, numFrames);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;}</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">// Free buffers on destruction</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#a59b8743e4a5f731bdd0c4185c9ef263b">   59</a></span>&#160;<a class="code" href="classcsl_1_1_buffer.html#a59b8743e4a5f731bdd0c4185c9ef263b">Buffer::~Buffer</a>() {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classcsl_1_1_buffer.html#a48700df48c6455e36e6e43a2a1ec10ca">mDidIAllocateBuffers</a>)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <a class="code" href="classcsl_1_1_buffer.html#a24c3994dfe73ba91980273ab3ccf0fa6">freeBuffers</a>();</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;}</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">// sample pointer accessor (used to be called monoBuffer()</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#ab05a54225ae97f9ed1ae30bbbc0fd14c">   66</a></span>&#160;<a class="code" href="namespacecsl.html#a2e5ffaea3f06948bf8e7a26295dca9d5">SampleBuffer</a> <a class="code" href="classcsl_1_1_buffer.html#ab05a54225ae97f9ed1ae30bbbc0fd14c">Buffer::buffer</a>(<span class="keywordtype">unsigned</span> bufNum) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a> &gt; bufNum)</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[bufNum];</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;}</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">// SetSize creates the vector of sample pointers, does not allocate the sample storage</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#a8c25c9f605b0cdebd4626bf4795b286d">   75</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_buffer.html#a8c25c9f605b0cdebd4626bf4795b286d">Buffer::setSize</a>(<span class="keywordtype">unsigned</span> numChannels, <span class="keywordtype">unsigned</span> numFrames) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classcsl_1_1_buffer.html#ab26d21f23ceef4a964ac381b9274ff09">mAreBuffersAllocated</a> &amp;&amp; <a class="code" href="classcsl_1_1_buffer.html#a48700df48c6455e36e6e43a2a1ec10ca">mDidIAllocateBuffers</a> &amp;&amp; (<a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a> != numChannels) </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                &amp;&amp; (<a class="code" href="classcsl_1_1_buffer.html#ae67b75acbd22cf2e99dcd94a4828c5a6">mNumAlloc</a> &lt; numFrames)) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <a class="code" href="classcsl_1_1_buffer.html#a24c3994dfe73ba91980273ab3ccf0fa6">freeBuffers</a>();</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <a class="code" href="classcsl_1_1_buffer.html#a48700df48c6455e36e6e43a2a1ec10ca">mDidIAllocateBuffers</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <a class="code" href="classcsl_1_1_buffer.html#ab26d21f23ceef4a964ac381b9274ff09">mAreBuffersAllocated</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a> != numChannels) {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a> = numChannels;                 <span class="comment">// Transfer parameters to member variables</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>)</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            <span class="keyword">delete</span> <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>;                        <span class="comment">// free buffer pointers</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a> = <span class="keyword">new</span> <a class="code" href="namespacecsl.html#a2e5ffaea3f06948bf8e7a26295dca9d5">SampleBuffer</a>[numChannels];   <span class="comment">// reserve space for buffers</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>; i++)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[i] = 0;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a> != numFrames) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a> = numFrames;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <a class="code" href="classcsl_1_1_buffer.html#a649b8659887a82739a1cf4c57c731a18">mMonoBufferByteSize</a> = <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a> * <span class="keyword">sizeof</span>(<a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a>);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html#ad29437a569b9ebde64675830c54e313f">mIsPopulated</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;}</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">// set size and don&#39;t allocate vector space either</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#a271e468fd7db8b019219d59dda7191a5">   99</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_buffer.html#a271e468fd7db8b019219d59dda7191a5">Buffer::setSizeOnly</a>(<span class="keywordtype">unsigned</span> numChannels, <span class="keywordtype">unsigned</span> numFrames) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a> = numChannels;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a> = numFrames;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html#a649b8659887a82739a1cf4c57c731a18">mMonoBufferByteSize</a> = numFrames * <span class="keyword">sizeof</span>(<a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a>);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">// allocate if not already there</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#af22d974d9c91cace59a16c3de3f64897">  107</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_buffer.html#af22d974d9c91cace59a16c3de3f64897">Buffer::checkBuffers</a>() throw (<a class="code" href="classcsl_1_1_memory_error.html">MemoryError</a>) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="classcsl_1_1_buffer.html#ab26d21f23ceef4a964ac381b9274ff09">mAreBuffersAllocated</a>)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <a class="code" href="classcsl_1_1_buffer.html#a6880eea0019e9ebf7a61ce542e52a23a">allocateBuffers</a>();</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;}</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">// answer the buffer&#39;s duration in seconds</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#a918fcf7dae9b05fdbfd16ec773f2a3a3">  114</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classcsl_1_1_buffer.html#a918fcf7dae9b05fdbfd16ec773f2a3a3">Buffer::duration</a>() {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">return</span> ((<span class="keywordtype">float</span>) <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a> / <a class="code" href="classcsl_1_1_c_gestalt.html#a888542479f14417d3546278bcde01756">CGestalt::frameRateF</a>()); </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;}</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">// allocate the sample arrays</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">//#define FVERBOSE_MALLOC           // define for verbose debugging of buffer alloc/free</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#a6880eea0019e9ebf7a61ce542e52a23a">  122</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_buffer.html#a6880eea0019e9ebf7a61ce542e52a23a">Buffer::allocateBuffers</a>() throw (<a class="code" href="classcsl_1_1_memory_error.html">MemoryError</a>) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">#ifdef FVERBOSE_MALLOC</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;            Buffer::allocateBuffers(%x  %d  %d)&quot;</span>, <span class="keyword">this</span>, <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>, <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a> == NULL)</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a> = <span class="keyword">new</span> <a class="code" href="namespacecsl.html#a2e5ffaea3f06948bf8e7a26295dca9d5">SampleBuffer</a>[<a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>];  <span class="comment">// reserve space for buffers</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>; i++) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <a class="code" href="_c_gestalt_8h.html#a6580b20db89e43c9166920172e3ed751">SAFE_MALLOC</a>(<a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[i], <a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a>, <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        memset(<a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[i], 0, <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a> * <span class="keyword">sizeof</span>(<a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a>));</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">//  if (mNumFrames &lt; 16)</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">//      logMsg(&quot;Small buffer: %d&quot;, mNumFrames);</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html#ab26d21f23ceef4a964ac381b9274ff09">mAreBuffersAllocated</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html#a48700df48c6455e36e6e43a2a1ec10ca">mDidIAllocateBuffers</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html#ae67b75acbd22cf2e99dcd94a4828c5a6">mNumAlloc</a> = <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">// free them carefully</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#a24c3994dfe73ba91980273ab3ccf0fa6">  141</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_buffer.html#a24c3994dfe73ba91980273ab3ccf0fa6">Buffer::freeBuffers</a>() {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="classcsl_1_1_buffer.html#ab26d21f23ceef4a964ac381b9274ff09">mAreBuffersAllocated</a>)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">return</span>;                 <span class="comment">// they aren&#39;t allocated -- I shouldn&#39;t free them</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="classcsl_1_1_buffer.html#a48700df48c6455e36e6e43a2a1ec10ca">mDidIAllocateBuffers</a>)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">return</span>;                 <span class="comment">// I didn&#39;t allocate them -- I shouldn&#39;t free them</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">if</span> (&amp; <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a> == NULL)</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor">#ifdef FVERBOSE_MALLOC</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;            Buffer::freeBuffers    (%x  %d  %d)&quot;</span>, <span class="keyword">this</span>, <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>, <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a>);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>; i++) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[i]) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                <span class="keyword">delete</span> <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[i];     <span class="comment">// do the delete</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[i] = NULL;     <span class="comment">// set to zero right away</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    } <span class="keywordflow">catch</span> (std::exception ex) {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<a class="code" href="namespacecsl.html#abac90833d4619f34250e6a669ff127c7a32856b6dbfa48d010094cd39ef0ebdb7">kLogError</a>, <span class="stringliteral">&quot;\nError in Buffer::freeBuffers: %s\n&quot;</span>, ex.what());</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classcsl_1_1_memory_error.html">MemoryError</a>(<span class="stringliteral">&quot;Error in Buffer::freeBuffers&quot;</span>);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html#ab26d21f23ceef4a964ac381b9274ff09">mAreBuffersAllocated</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html#a48700df48c6455e36e6e43a2a1ec10ca">mDidIAllocateBuffers</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keyword">delete</span> <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a> = 0;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html#ae67b75acbd22cf2e99dcd94a4828c5a6">mNumAlloc</a> = 0;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a> = 0;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html#a649b8659887a82739a1cf4c57c731a18">mMonoBufferByteSize</a> = 0;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;}</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">// empty the sample buffers</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#adffa7078fa839efa88302a238e0ba8f8">  173</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_buffer.html#adffa7078fa839efa88302a238e0ba8f8">Buffer::zeroBuffers</a>() {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">if</span> ( ! <a class="code" href="classcsl_1_1_buffer.html#ab26d21f23ceef4a964ac381b9274ff09">mAreBuffersAllocated</a>)</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>; i++)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        memset(<a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[i], 0, <a class="code" href="classcsl_1_1_buffer.html#a649b8659887a82739a1cf4c57c731a18">mMonoBufferByteSize</a>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html#a06b97a72515ead21060b2b76ff46714c">mAreBuffersZero</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">/// answer a samp ptr tested for extent (offset + maxFrame)</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#af7132204ccce08b9ae46c5cd0205cb4d">  183</a></span>&#160;<a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a> * <a class="code" href="classcsl_1_1_buffer.html#af7132204ccce08b9ae46c5cd0205cb4d">Buffer::samplePtrFor</a>(<span class="keywordtype">unsigned</span> channel, <span class="keywordtype">unsigned</span> offset){</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">return</span>(<a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[channel] + offset);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;}</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">/// answer a samp ptr tested for extent (offset + maxFrame)</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#a862c617a72a9e6e45060e1bbd902be9b">  189</a></span>&#160;<a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a> * <a class="code" href="classcsl_1_1_buffer.html#af7132204ccce08b9ae46c5cd0205cb4d">Buffer::samplePtrFor</a>(<span class="keywordtype">unsigned</span> channel, <span class="keywordtype">unsigned</span> offset, <span class="keywordtype">unsigned</span> maxFrame){</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classcsl_1_1_buffer.html#ae67b75acbd22cf2e99dcd94a4828c5a6">mNumAlloc</a> &gt;= (offset + maxFrame))</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">return</span>(<a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[channel] + offset);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;}</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">///&lt; answer whether the receiver can store numFrames more frames</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#af447a9071024c8dbcaa11c8070f51836">  197</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classcsl_1_1_buffer.html#af447a9071024c8dbcaa11c8070f51836">Buffer::canStore</a>(<span class="keywordtype">unsigned</span> numFrames) {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">return</span> ((<a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a> + numFrames) &lt; <a class="code" href="classcsl_1_1_buffer.html#ae67b75acbd22cf2e99dcd94a4828c5a6">mNumAlloc</a>);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">// fill with a constant</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#a3176af0f95b2544ae3f74b38fcb0defe">  203</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_buffer.html#a3176af0f95b2544ae3f74b38fcb0defe">Buffer::fillWith</a>(<a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a> value) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordtype">float</span> * bbuffer = NULL;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordtype">float</span> lVal = value;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordtype">unsigned</span> outBufNum, i;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordtype">unsigned</span> numChans = <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordtype">unsigned</span> numFrames = <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">for</span> (outBufNum = 0; outBufNum &lt; numChans; outBufNum++) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        bbuffer = <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[outBufNum];</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; numFrames; i++)</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            *bbuffer++ = lVal;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html#a06b97a72515ead21060b2b76ff46714c">mAreBuffersZero</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">// scale the samples by the given value</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div>
<div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#a46dc1ed83826fc590a7f8551f9f59932">  219</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_buffer.html#a46dc1ed83826fc590a7f8551f9f59932">Buffer::scaleBy</a>(<a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a> value) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordtype">float</span> * bbuffer = NULL;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordtype">float</span> lVal = value;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordtype">unsigned</span> outBufNum, i;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordtype">unsigned</span> numChans = <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordtype">unsigned</span> numFrames = <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">for</span> (outBufNum = 0; outBufNum &lt; numChans; outBufNum++) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        bbuffer = <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[outBufNum];</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; numFrames; i++)</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            *bbuffer++ *= lVal;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html#a06b97a72515ead21060b2b76ff46714c">mAreBuffersZero</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;}</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">// copy the &quot;header&quot; info</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#a3d120398cd5ef4f1fb5ecc63d826d966">  235</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_buffer.html#a3d120398cd5ef4f1fb5ecc63d826d966">Buffer::copyHeaderFrom</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; source) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_run_time_error.html">RunTimeError</a>) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">if</span> ((source.mNumChannels &gt; mNumChannels) || (source.mNumFrames &gt; mNumAlloc)) {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Buffer::copyHeaderFrom(ch %d %d, fr %d %d)&quot;</span>, </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                mNumChannels, source.mNumChannels, mNumAlloc, source.mNumFrames);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classcsl_1_1_run_time_error.html">RunTimeError</a>(<span class="stringliteral">&quot;Can&#39;t reallocate buffers at run-time&quot;</span>);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    } </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    mNumChannels = source.mNumChannels;         <span class="comment">// copy members</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    mNumFrames = source.mNumFrames;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    mMonoBufferByteSize = mNumFrames * <span class="keyword">sizeof</span>(<a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a>);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    mSequence = source.mSequence;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    mType = source.mType;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;}</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">// Copy everything but samples from the argument to the receiver</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#a2bdd2120125a9b00a40aafe6d7fe3c65">  250</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_buffer.html#a2bdd2120125a9b00a40aafe6d7fe3c65">Buffer::copyFrom</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; source) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_run_time_error.html">RunTimeError</a>) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    this-&gt;freeBuffers();                        <span class="comment">// free everything</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keyword">delete</span> mBuffers;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    mNumChannels = source.mNumChannels;         <span class="comment">// copy members</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    mNumFrames = source.mNumFrames;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    mNumAlloc = source.mNumAlloc;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    mMonoBufferByteSize = mNumFrames * <span class="keyword">sizeof</span>(<a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a>);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    mSequence = source.mSequence;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    mBuffers = <span class="keyword">new</span> <a class="code" href="namespacecsl.html#a2e5ffaea3f06948bf8e7a26295dca9d5">SampleBuffer</a>[mNumChannels];  <span class="comment">// reserve space for buffers</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                                                <span class="comment">// copy sample pointers</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> outBufNum = 0; outBufNum &lt; mNumChannels; outBufNum++) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        mBuffers[outBufNum] = source.buffer(outBufNum);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    mAreBuffersZero = <span class="keyword">false</span>;                    <span class="comment">// set flags</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    mAreBuffersAllocated = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    mDidIAllocateBuffers = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;}</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">// Copy samples from the argument to the receiver; be paranoid about size limits</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#a2985567420be118187e5d4010aa37833">  270</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_buffer.html#a2985567420be118187e5d4010aa37833">Buffer::copySamplesFrom</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; source) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_run_time_error.html">RunTimeError</a>) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">if</span> ((source.mNumChannels &gt; mNumChannels) || (source.mNumFrames &gt; mNumAlloc)) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<a class="code" href="namespacecsl.html#abac90833d4619f34250e6a669ff127c7a32856b6dbfa48d010094cd39ef0ebdb7">kLogError</a>, <span class="stringliteral">&quot;Buffer::copySamplesFrom(ch %d %d, fr %d %d)&quot;</span>, </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                mNumChannels, source.mNumChannels, mNumAlloc, source.mNumFrames);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classcsl_1_1_run_time_error.html">RunTimeError</a>(<span class="stringliteral">&quot;Can&#39;t reallocate buffers at run-time&quot;</span>);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    } </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    mNumChannels = source.mNumChannels;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    mNumFrames = source.mNumFrames;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    mMonoBufferByteSize = mNumFrames * <span class="keyword">sizeof</span>(<a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a>);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> outBufNum = 0; outBufNum &lt; mNumChannels; outBufNum++) {           <span class="comment">// copy loop</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordtype">unsigned</span> sBufNum = <a class="code" href="_c_s_l___types_8h.html#ae8ec6a68799a96c76a1e37d9632fda38">csl_min</a>(outBufNum, (source.mNumChannels - 1));</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        memcpy(mBuffers[outBufNum], source.buffer(sBufNum), mMonoBufferByteSize);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    mAreBuffersZero = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;}</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#a36b0e60af8a42fcd821c7f920387111c">  286</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_buffer.html#a36b0e60af8a42fcd821c7f920387111c">Buffer::copyOnlySamplesFrom</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; source) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_run_time_error.html">RunTimeError</a>) {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">if</span> ((source.mNumChannels &gt; mNumChannels) || (source.mNumFrames &gt; mNumAlloc)) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<a class="code" href="namespacecsl.html#abac90833d4619f34250e6a669ff127c7a32856b6dbfa48d010094cd39ef0ebdb7">kLogError</a>, <span class="stringliteral">&quot;Buffer::copyOnlySamplesFrom(ch %d %d, fr %d %d)&quot;</span>, </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                mNumChannels, source.mNumChannels, mNumFrames, source.mNumFrames);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classcsl_1_1_run_time_error.html">RunTimeError</a>(<span class="stringliteral">&quot;Can&#39;t reallocate buffers at run-time&quot;</span>);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    } </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> outBufNum = 0; outBufNum &lt; mNumChannels; outBufNum++) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordtype">unsigned</span> sBufNum = <a class="code" href="_c_s_l___types_8h.html#ae8ec6a68799a96c76a1e37d9632fda38">csl_min</a>(outBufNum, (source.mNumChannels - 1));</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        memcpy(mBuffers[outBufNum], source.buffer(sBufNum), mMonoBufferByteSize);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;}</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">///&lt; same with write offset</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#ab1c9511087c61dea57e2a8700a6de823">  300</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_buffer.html#ab1c9511087c61dea57e2a8700a6de823">Buffer::copySamplesFromTo</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; source, <span class="keywordtype">unsigned</span> offset) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_run_time_error.html">RunTimeError</a>) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">if</span> ((source.mNumChannels &gt; mNumChannels) || ((offset + source.mNumFrames) &gt; mNumAlloc)) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<a class="code" href="namespacecsl.html#abac90833d4619f34250e6a669ff127c7a32856b6dbfa48d010094cd39ef0ebdb7">kLogError</a>, <span class="stringliteral">&quot;Buffer::copyOnlySamplesFrom(ch %d %d, fr %d %d)&quot;</span>, </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;               mNumChannels, source.mNumChannels, mNumFrames, source.mNumFrames);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classcsl_1_1_run_time_error.html">RunTimeError</a>(<span class="stringliteral">&quot;Can&#39;t reallocate buffers at run-time&quot;</span>);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    } </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> outBufNum = 0; outBufNum &lt; mNumChannels; outBufNum++) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordtype">unsigned</span> sBufNum = <a class="code" href="_c_s_l___types_8h.html#ae8ec6a68799a96c76a1e37d9632fda38">csl_min</a>(outBufNum, (source.mNumChannels - 1));</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        memcpy(mBuffers[outBufNum] + offset, source.buffer(sBufNum), </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                (source.mNumFrames * <span class="keyword">sizeof</span>(<a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a>)));</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;}</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">// read a buffer from a snd file; answer success</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#a002adaad8e1a1d0d94cc0472fa1c33ca">  315</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classcsl_1_1_buffer.html#a002adaad8e1a1d0d94cc0472fa1c33ca">Buffer::readFromFile</a>(<span class="keywordtype">char</span> * finam) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">if</span> (strlen(finam) == 0) {       <span class="comment">// if no file name</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<a class="code" href="namespacecsl.html#abac90833d4619f34250e6a669ff127c7a32856b6dbfa48d010094cd39ef0ebdb7">kLogError</a>, <span class="stringliteral">&quot;Sound file name is empty.&quot;</span>);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">//      throw LengthError(&quot;Sound file name is empty.&quot;);</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                                    <span class="comment">// open snd file</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    SoundFile * inFile = SoundFile::openSndfile(finam);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">if</span> ( ! inFile-&gt;isValid()) {     <span class="comment">// check result status</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">//      logMsg(kLogError, &quot;Error opening sound file \&quot;%s\&quot; (invalid)&quot;, finam);</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keyword">delete</span> inFile;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                                    <span class="comment">// copy data over to new buffer</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    this-&gt;<a class="code" href="classcsl_1_1_buffer.html#a2bdd2120125a9b00a40aafe6d7fe3c65">copyFrom</a>(inFile-&gt;mWavetable);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    this-&gt;<a class="code" href="classcsl_1_1_buffer.html#a48700df48c6455e36e6e43a2a1ec10ca">mDidIAllocateBuffers</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    inFile-&gt;mWavetable.mDidIAllocateBuffers = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keyword">delete</span> inFile;                  <span class="comment">// delete infile</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a> == 0) {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<a class="code" href="namespacecsl.html#abac90833d4619f34250e6a669ff127c7a32856b6dbfa48d010094cd39ef0ebdb7">kLogError</a>, <span class="stringliteral">&quot;Error opening sound file \&quot;%s\&quot; (empty)&quot;</span>, finam);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                                    <span class="comment">// everything&#39;s OK; proceed</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">//  logMsg(&quot;Opened file: \&quot;%s\&quot; = %5.3f sec = %d samps = %d win&quot;,</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">//          finam, ((float)mSndBuffer.mNumFrames / CGestalt::frameRateF()),</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">//          mSndBuffer.mNumFrames, (mSndBuffer.mNumFrames / mFeatExtr-&gt;mHopSize));</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;}</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">// normalize the buffer(s) to the given max val; answer the prior max val</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#a27cd634184b30949bb567f9cde4d803b">  348</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classcsl_1_1_buffer.html#a27cd634184b30949bb567f9cde4d803b">Buffer::normalize</a>(<span class="keywordtype">float</span> maxVal) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordtype">float</span> * bbuffer = NULL;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordtype">unsigned</span> outBufNum, i;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordtype">unsigned</span> numChans = <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordtype">unsigned</span> numFrames = <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordtype">float</span> maxSamp = 0.0f;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">for</span> (outBufNum = 0; outBufNum &lt; numChans; outBufNum++) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        bbuffer = <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[outBufNum];</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; numFrames; i++) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <span class="keywordtype">float</span> samp = fabs(*bbuffer++);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="keywordflow">if</span> (samp &gt; maxSamp)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                maxSamp = samp;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">if</span> (maxSamp == 0.0f)</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">return</span> maxSamp;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordtype">float</span> scaleV = maxVal / maxSamp;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">for</span> (outBufNum = 0; outBufNum &lt; numChans; outBufNum++) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        bbuffer = <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[outBufNum];</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; numFrames; i++) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            *bbuffer *= scaleV;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            bbuffer++;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">return</span> maxSamp;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;}</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">// normalize the given region only</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#a32de7bb30a82a3ff0e0074f0e02e481a">  377</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="classcsl_1_1_buffer.html#a27cd634184b30949bb567f9cde4d803b">Buffer::normalize</a>(<span class="keywordtype">float</span> maxVal, <span class="keywordtype">float</span> from, <span class="keywordtype">float</span> to) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordtype">float</span> * bbuffer = NULL;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordtype">unsigned</span> outBufNum, i;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordtype">unsigned</span> numChans = <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordtype">unsigned</span> numFrames = <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordtype">float</span> maxSamp = 0.0f;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordtype">unsigned</span> samp0 = (unsigned)(from * <a class="code" href="classcsl_1_1_c_gestalt.html#a888542479f14417d3546278bcde01756">CGestalt::frameRateF</a>());</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordtype">unsigned</span> sampN = (unsigned)(to * <a class="code" href="classcsl_1_1_c_gestalt.html#a888542479f14417d3546278bcde01756">CGestalt::frameRateF</a>());</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">for</span> (outBufNum = 0; outBufNum &lt; numChans; outBufNum++) {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        bbuffer = <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[outBufNum] + samp0;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">for</span> (i = samp0; i &lt; sampN; i++) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <span class="keywordtype">float</span> samp = fabs(*bbuffer++);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <span class="keywordflow">if</span> (samp &gt; maxSamp)</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                maxSamp = samp;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">if</span> (maxSamp == 0.0f)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="keywordflow">return</span> maxSamp;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">if</span> (maxSamp == maxVal)</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="keywordflow">return</span> maxSamp;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordtype">float</span> scaleV = maxVal / maxSamp;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">for</span> (outBufNum = 0; outBufNum &lt; numChans; outBufNum++) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        bbuffer = <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[outBufNum] + samp0;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">for</span> (i = samp0; i &lt; sampN; i++) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            *bbuffer *= scaleV;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            bbuffer++;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">return</span> maxSamp;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;}</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="preprocessor">#ifdef USE_SRC // sample-rate conversion methods</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">// convert the sample rate using libSampleRate</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<a class="code" href="namespacecsl.html#ac2c2565225bd914df34848bfcc5517f6">Status</a> <a class="code" href="classcsl_1_1_buffer.html#a1fa3f4a3ccefa410caccff18bbd5c88d">Buffer::convertRate</a>(<span class="keywordtype">int</span> fromRate, <span class="keywordtype">int</span> toRate) {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordtype">double</span> src_ratio = (double) toRate / (<span class="keywordtype">double</span>) fromRate;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="_tests_2_o_s_c_2_o_s_c__support_8cpp.html#a055a6ba75f8e5b442ae70a56e2f85bf6">error</a>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                                    <span class="comment">// scaled buffer length</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordtype">unsigned</span> newLen = (unsigned) (rint(((<span class="keywordtype">double</span>) <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a>) * src_ratio));</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    SRC_STATE * src_state;          <span class="comment">// SRC structs</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    SRC_DATA src_data;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                                        <span class="comment">// create/allocate new scaled buffer</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html">Buffer</a> * newBuf = <span class="keyword">new</span> <a class="code" href="classcsl_1_1_buffer.html#a95f21039ad600c844f3ba7e5ae421d47">Buffer</a>(<a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>, newLen);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    newBuf-&gt;<a class="code" href="classcsl_1_1_buffer.html#a6880eea0019e9ebf7a61ce542e52a23a">allocateBuffers</a>();</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">//  logMsg(&quot;Buffer::convertRate from %d to %d = %d frames&quot;, fromRate, toRate, newLen);</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                                                <span class="comment">// create temp name and rename file</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    src_ratio = (double) toRate / (<span class="keywordtype">double</span>) fromRate;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">if</span> (src_is_valid_ratio (src_ratio) == 0) {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a> (<a class="code" href="namespacecsl.html#abac90833d4619f34250e6a669ff127c7a32856b6dbfa48d010094cd39ef0ebdb7">kLogError</a>, <span class="stringliteral">&quot;Error: Sample rate change out of valid range.&quot;</span>);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacecsl.html#ac2c2565225bd914df34848bfcc5517f6a452950010f4a2bea6156404e12a824d3">kErr</a>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                                    <span class="comment">/* Initialize the sample rate converter. */</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">if</span> ((src_state = src_new (SRC_SINC_FASTEST <span class="comment">/* SRC_SINC_BEST_QUALITY */</span>, 1, &amp;error)) == NULL) {  </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a> (<span class="stringliteral">&quot;Error : src_new() failed : %s.&quot;</span>, src_strerror (error));</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        exit (1);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    };</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    src_data.src_ratio = src_ratio; <span class="comment">// set up SRC</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    src_data.input_frames = <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    src_data.output_frames = newLen;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    src_data.end_of_input = 1;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                                    <span class="comment">// loop over the channels</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>; i++) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        src_data.data_in = <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[i];</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        src_data.data_out = newBuf-&gt;<a class="code" href="classcsl_1_1_buffer.html#ab05a54225ae97f9ed1ae30bbbc0fd14c">buffer</a>(i);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                                    <span class="comment">// call src_process</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        error = src_process(src_state, &amp;src_data);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">if</span> (error) {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;SRC Error : %s&quot;</span>, src_strerror(error));</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespacecsl.html#ac2c2565225bd914df34848bfcc5517f6a452950010f4a2bea6156404e12a824d3">kErr</a>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        }</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    src_state = src_delete (src_state);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    this-&gt;<a class="code" href="classcsl_1_1_buffer.html#a2bdd2120125a9b00a40aafe6d7fe3c65">copyFrom</a>(*newBuf);        <span class="comment">// copy sample pointers to me</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html#a48700df48c6455e36e6e43a2a1ec10ca">mDidIAllocateBuffers</a> = <span class="keyword">true</span>;    <span class="comment">// toggle ownership flags</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    newBuf-&gt;<a class="code" href="classcsl_1_1_buffer.html#a48700df48c6455e36e6e43a2a1ec10ca">mDidIAllocateBuffers</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keyword">delete</span> newBuf;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacecsl.html#ac2c2565225bd914df34848bfcc5517f6aaa59f61470af66f345ad160987eca8c2">kOk</a>;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;}</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">///////////////////////////////////</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment"></span><span class="comment"></span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">///&lt; get the root-mean-square of the samples</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00465"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#a7312fd854f77139838e66310d68884b1">  465</a></span>&#160;<a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a> <a class="code" href="classcsl_1_1_buffer.html#a7312fd854f77139838e66310d68884b1">Buffer::rms</a>(<span class="keywordtype">unsigned</span> chan, <span class="keywordtype">unsigned</span> from, <span class="keywordtype">unsigned</span> to) {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordtype">unsigned</span> theCh = chan % <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordtype">unsigned</span> numFrames = <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a>;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a> val, sum = 0.0;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a>* <a class="code" href="classcsl_1_1_buffer.html#ab05a54225ae97f9ed1ae30bbbc0fd14c">buffer</a> = <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[theCh];</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordtype">unsigned</span> cnt = 0;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = from; i &lt; to; i++) {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        val = *buffer++;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="keywordflow">if</span> (isnan(val)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="keywordflow">if</span> (isinf(val)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        sum += (val * val);         <span class="comment">// sum squared samples</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        cnt++;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">return</span> sum / cnt;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;}</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">///&lt; get the average of the samples</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00483"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#ab8aa749635753645f17d7bfa17d1ed95">  483</a></span>&#160;<a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a> <a class="code" href="classcsl_1_1_buffer.html#ab8aa749635753645f17d7bfa17d1ed95">Buffer::avg</a>(<span class="keywordtype">unsigned</span> chan, <span class="keywordtype">unsigned</span> from, <span class="keywordtype">unsigned</span> to) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordtype">unsigned</span> thech = chan % <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordtype">unsigned</span> numFrames = <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a> sum = 0.0;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a>* <a class="code" href="classcsl_1_1_buffer.html#ab05a54225ae97f9ed1ae30bbbc0fd14c">buffer</a> = <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[thech];</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; numFrames; i++)</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        sum += *buffer++;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">return</span> sum / numFrames;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;}</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">///&lt; get the max of the samples</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00495"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#ae82190fb16006a36bbf610942e174098">  495</a></span>&#160;<a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a> <a class="code" href="classcsl_1_1_buffer.html#ae82190fb16006a36bbf610942e174098">Buffer::max</a>(<span class="keywordtype">unsigned</span> chan, <span class="keywordtype">unsigned</span> from, <span class="keywordtype">unsigned</span> to) {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordtype">unsigned</span> thech = chan % <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordtype">unsigned</span> numFrames = <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a>;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a> val, tmax = 0.0;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a>* <a class="code" href="classcsl_1_1_buffer.html#ab05a54225ae97f9ed1ae30bbbc0fd14c">buffer</a> = <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[thech];</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; numFrames; i++) {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        val = *buffer++;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keywordflow">if</span> (fabs(val) &gt; tmax)       tmax - fabs(val);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">return</span> tmax;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;}</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">///&lt; get the min of the samples</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00509"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer.html#a07f4f503cc7850d8899dcde1a311f0ff">  509</a></span>&#160;<a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a> <a class="code" href="classcsl_1_1_buffer.html#a07f4f503cc7850d8899dcde1a311f0ff">Buffer::min</a>(<span class="keywordtype">unsigned</span> chan, <span class="keywordtype">unsigned</span> from, <span class="keywordtype">unsigned</span> to) {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordtype">unsigned</span> thech = chan % <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordtype">unsigned</span> numFrames = <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a> val, tmax = 0.0;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a>* <a class="code" href="classcsl_1_1_buffer.html#ab05a54225ae97f9ed1ae30bbbc0fd14c">buffer</a> = <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[thech];</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; numFrames; i++) {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        val = *buffer++;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="keywordflow">if</span> (fabs(val) &gt; tmax)       tmax - fabs(val);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">return</span> tmax;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;}</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="preprocessor">#ifdef CSL_DSP_BUFFER               </span><span class="comment">/// Buffer Sample Processing (optional)</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="preprocessor">#include &lt;libtsp.h&gt;</span>                 <span class="comment">// for the autocorrelation</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">///&lt; count the zero-crossings in the samples</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Buffer::zeroX(<span class="keywordtype">unsigned</span> chan) {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordtype">unsigned</span> thech = chan % <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordtype">unsigned</span> numFrames = <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a>, count = 0, sign = 0;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a> val;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a>* <a class="code" href="classcsl_1_1_buffer.html#ab05a54225ae97f9ed1ae30bbbc0fd14c">buffer</a> = <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[thech];</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; numFrames; i++) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        val = *buffer++;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="keywordflow">if</span> (((val &gt; 0) &amp;&amp; sign) || ((val &lt; 0) &amp;&amp; ! sign)) {</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            count += 1;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            sign = 1 - sign;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        }</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordflow">return</span> count;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;}</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">///&lt; answer the index of the peak value</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Buffer::indexOfPeak(<span class="keywordtype">unsigned</span> chan) {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordtype">unsigned</span> thech = chan % <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordtype">unsigned</span> numFrames = <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a>, index;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a> val, tmax = -1000000.0;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a>* buffer = <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[thech];</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; numFrames; i++) {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        val = *buffer++;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="keywordflow">if</span> (val &gt; tmax) {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            tmax = val;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            index = i;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        }</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    }</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">return</span> index;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;}</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">///&lt; answer the index of the peak value</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Buffer::indexOfPeak(<span class="keywordtype">unsigned</span> chan, <span class="keywordtype">unsigned</span> lo, <span class="keywordtype">unsigned</span> hi) {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordtype">unsigned</span> index = 0, thech = chan % <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a> val, tmax = -100000.0;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a>* buffer = <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[thech] + lo;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = lo; i &lt; hi; i++) {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        val = *buffer++;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keywordflow">if</span> (val &gt; tmax) {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            tmax = val;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            index = i;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    }</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">return</span> index;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">///&lt; answer the index of the peak value</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Buffer::indexOfMin(<span class="keywordtype">unsigned</span> chan) {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordtype">unsigned</span> thech = chan % <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordtype">unsigned</span> numFrames = <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a>, index;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a> val, tmin = 1000000.0;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a>* buffer = <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[thech];</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; numFrames; i++) {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        val = *buffer++;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keywordflow">if</span> (val &lt; tmin) {</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            tmin = val;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            index = i;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">return</span> index;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;}</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">///&lt; answer the index of the peak value</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Buffer::indexOfMin(<span class="keywordtype">unsigned</span> chan, <span class="keywordtype">unsigned</span> lo, <span class="keywordtype">unsigned</span> hi) {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordtype">unsigned</span> index = 0, thech = chan % <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a> val, tmin = 1000000.0;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a>* buffer = <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[thech] + lo;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = lo; i &lt; hi; i++) {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        val = *buffer++;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="keywordflow">if</span> (val &lt; tmin) {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            tmin = val;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            index = i;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        }</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">return</span> index;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;}</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">///&lt; write the autocorrelation into the given array</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="keywordtype">void</span> Buffer::autocorrelation(<span class="keywordtype">unsigned</span> chan, <a class="code" href="namespacecsl.html#a2e5ffaea3f06948bf8e7a26295dca9d5">SampleBuffer</a> result) {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordtype">unsigned</span> thech = chan % <a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordtype">unsigned</span> numFrames = <a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a>;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <a class="code" href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">sample</a>* buffer = <a class="code" href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">mBuffers</a>[thech];</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="comment">//  SPautoc (const float in[], int in_size, float out[], int out_size)</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="comment">//      - out[i] is autocorrelation with lag i</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    SPautoc (buffer, numFrames, result, numFrames);         <span class="comment">// perform autocorrelation</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;}</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="preprocessor">#endif // CSL_DSP_BUFFER</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment">// Sample buffer with channel map and count</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment">// the map is so that one can have (e.g.,) a buffer that stands for 3 channels within an 8-channel space</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div>
<div class="line"><a name="l00625"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer_c_map.html#a4215af773b98e8618c9486ec012b8a13">  625</a></span>&#160;<a class="code" href="classcsl_1_1_buffer_c_map.html#a4215af773b98e8618c9486ec012b8a13">BufferCMap::BufferCMap</a>() : <a class="code" href="classcsl_1_1_buffer.html">Buffer</a>() { }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div>
<div class="line"><a name="l00627"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer_c_map.html#a2f5d56753bc701c75e6f4db7680dc587">  627</a></span>&#160;<a class="code" href="classcsl_1_1_buffer_c_map.html#a4215af773b98e8618c9486ec012b8a13">BufferCMap::BufferCMap</a>(<span class="keywordtype">unsigned</span> numChannels, <span class="keywordtype">unsigned</span> numFrames) :</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <a class="code" href="classcsl_1_1_buffer.html">Buffer</a>(numChannels, numFrames),</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            mRealNumChannels(numChannels) { }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div>
<div class="line"><a name="l00631"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer_c_map.html#a3639af7c5caeb0ca61a890703b874b35">  631</a></span>&#160;<a class="code" href="classcsl_1_1_buffer_c_map.html#a4215af773b98e8618c9486ec012b8a13">BufferCMap::BufferCMap</a>(<span class="keywordtype">unsigned</span> numChannels, <span class="keywordtype">unsigned</span> realNumChannels, <span class="keywordtype">unsigned</span> numFrames) :</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            <a class="code" href="classcsl_1_1_buffer.html">Buffer</a>(numChannels, numFrames),</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            mRealNumChannels(realNumChannels) { }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div>
<div class="line"><a name="l00635"></a><span class="lineno"><a class="line" href="classcsl_1_1_buffer_c_map.html#a4b87bf16ad480aed824ec8acba5808d0">  635</a></span>&#160;<a class="code" href="classcsl_1_1_buffer_c_map.html#a4b87bf16ad480aed824ec8acba5808d0">BufferCMap::~BufferCMap</a>() { }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">//-------------------------------------------------------------------------------------------------//</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">// UnitGenerator implementation</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="preprocessor">#pragma mark UnitGenerator</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment">// mono by default</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div>
<div class="line"><a name="l00647"></a><span class="lineno"><a class="line" href="classcsl_1_1_unit_generator.html#aa7c9698175013a0c8034fb1726a69216">  647</a></span>&#160;<a class="code" href="classcsl_1_1_unit_generator.html#aa7c9698175013a0c8034fb1726a69216">UnitGenerator::UnitGenerator</a>(<span class="keywordtype">unsigned</span> rate, <span class="keywordtype">unsigned</span> chans) :  <a class="code" href="classcsl_1_1_model.html">Model</a>(),</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                <a class="code" href="_c_gestalt_8cpp.html#a7e674ff8cf38619d58d67c5a6fc220fa">mFrameRate</a>(rate),</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                mNumChannels(chans),</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                mCopyPolicy(<a class="code" href="namespacecsl.html#ab643cfedf47a3924126b5ff703eae29baa9e680ac8d474993f51fe6cf33797807">kCopy</a>),</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                mNumOutputs(0),</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                mOutputCache(0),</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                mSequence(0)</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            <span class="comment">/*  mName(0) */</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    { }</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">///&lt; Destructor</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00659"></a><span class="lineno"><a class="line" href="classcsl_1_1_unit_generator.html#a6c5fcdaa7a0a59b426fd23dc7b1a1ab7">  659</a></span>&#160;<a class="code" href="classcsl_1_1_unit_generator.html#a6c5fcdaa7a0a59b426fd23dc7b1a1ab7">UnitGenerator::~UnitGenerator</a>() {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">//  logMsg(&quot;        ~UnitGenerator %x&quot;, this);</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;}</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div>
<div class="line"><a name="l00663"></a><span class="lineno"><a class="line" href="classcsl_1_1_unit_generator.html#a14621f54452b97881bacefabe88d914c">  663</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_unit_generator.html#a14621f54452b97881bacefabe88d914c">UnitGenerator::zeroBuffer</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; outputBuffer, <span class="keywordtype">unsigned</span> outBufNum) {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordtype">float</span> * buffer = outputBuffer.<a class="code" href="classcsl_1_1_buffer.html#ab05a54225ae97f9ed1ae30bbbc0fd14c">buffer</a>(outBufNum);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    memset(buffer, 0, outputBuffer.<a class="code" href="classcsl_1_1_buffer.html#a649b8659887a82739a1cf4c57c731a18">mMonoBufferByteSize</a>);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;}</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment">// output management and auto-fan-out</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div>
<div class="line"><a name="l00670"></a><span class="lineno"><a class="line" href="classcsl_1_1_unit_generator.html#ac552ea0ee58637e985321ed62920003a">  670</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_unit_generator.html#ac552ea0ee58637e985321ed62920003a">UnitGenerator::addOutput</a>(<a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> * ugen) {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">//  logMsg(&quot;UnitGenerator::addOutput %x to %x&quot;, ugen, this);</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <a class="code" href="classcsl_1_1_unit_generator.html#a560ed71245bfa740cec9fcd42210f5e1">mOutputs</a>.push_back(ugen);               <span class="comment">// if adding the 2nd output, set up fan-out cache</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="classcsl_1_1_unit_generator.html#a18fbfa273518b084b5e18aed48e1ea09">mNumOutputs</a> == 1) &amp;&amp; (<a class="code" href="classcsl_1_1_unit_generator.html#a8656302c00027e557a14e3f2f9f024fc">mOutputCache</a> == 0)) {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <a class="code" href="classcsl_1_1_unit_generator.html#a8656302c00027e557a14e3f2f9f024fc">mOutputCache</a> = <span class="keyword">new</span> <a class="code" href="classcsl_1_1_buffer.html">Buffer</a>(mNumChannels, <a class="code" href="classcsl_1_1_c_gestalt.html#a307bdedc01034447bd623010a43a51d2">CGestalt::blockSize</a>());</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <a class="code" href="classcsl_1_1_unit_generator.html#a8656302c00027e557a14e3f2f9f024fc">mOutputCache</a>-&gt;<a class="code" href="classcsl_1_1_buffer.html#a6880eea0019e9ebf7a61ce542e52a23a">allocateBuffers</a>();</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <a class="code" href="classcsl_1_1_unit_generator.html#a18fbfa273518b084b5e18aed48e1ea09">mNumOutputs</a>++;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;}</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div>
<div class="line"><a name="l00680"></a><span class="lineno"><a class="line" href="classcsl_1_1_unit_generator.html#a33dc32beaa3144b33c7b3c639be2e5ed">  680</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_unit_generator.html#a33dc32beaa3144b33c7b3c639be2e5ed">UnitGenerator::removeOutput</a>(<a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> * ugen) {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    UGenVector::iterator pos;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">for</span> (pos = <a class="code" href="classcsl_1_1_unit_generator.html#a560ed71245bfa740cec9fcd42210f5e1">mOutputs</a>.begin(); pos != <a class="code" href="classcsl_1_1_unit_generator.html#a560ed71245bfa740cec9fcd42210f5e1">mOutputs</a>.end(); ++pos) {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="keywordflow">if</span> (*pos == ugen) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            <a class="code" href="classcsl_1_1_unit_generator.html#a560ed71245bfa740cec9fcd42210f5e1">mOutputs</a>.erase(pos);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    }</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <a class="code" href="classcsl_1_1_unit_generator.html#a18fbfa273518b084b5e18aed48e1ea09">mNumOutputs</a>--;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;}</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment">// pretty-print the receiver</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div>
<div class="line"><a name="l00693"></a><span class="lineno"><a class="line" href="classcsl_1_1_unit_generator.html#ae1172496abefc5458c0034bb72be2b73">  693</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_unit_generator.html#ae1172496abefc5458c0034bb72be2b73">UnitGenerator::dump</a>() {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;a UnitGenerator with %d outputs&quot;</span>, <a class="code" href="classcsl_1_1_unit_generator.html#a560ed71245bfa740cec9fcd42210f5e1">mOutputs</a>.size());</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;}</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment">// check for fan-out; if fanning out, copy previous buffer &amp; return true</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div>
<div class="line"><a name="l00699"></a><span class="lineno"><a class="line" href="classcsl_1_1_unit_generator.html#ae26eb0bfea17ced109bb5301b83eedd3">  699</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classcsl_1_1_unit_generator.html#ae26eb0bfea17ced109bb5301b83eedd3">UnitGenerator::checkFanOut</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; outputBuffer) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keywordflow">if</span> (mNumOutputs &gt; 1) {                  <span class="comment">// if we&#39;re doing auto-fan-out</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <span class="keywordflow">if</span> (outputBuffer.mSequence &lt;= mSequence) {      <span class="comment">// if we&#39;ve already computed this seq #</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                                            <span class="comment">// and block copy samples from the cache into the output</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            outputBuffer.copyOnlySamplesFrom(*mOutputCache);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment">//          logMsg(&quot;UnitGenerator::checkFanOut&quot;);</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;                    <span class="comment">// finished!</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        }</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    }</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;}</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment">// if fanning out, store last output and set seq number</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div>
<div class="line"><a name="l00713"></a><span class="lineno"><a class="line" href="classcsl_1_1_unit_generator.html#ab0421f1e05e97b6ab6c4a667a54843b3">  713</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_unit_generator.html#ab0421f1e05e97b6ab6c4a667a54843b3">UnitGenerator::handleFanOut</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; outputBuffer) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">if</span> (mNumOutputs &gt; 1)                    <span class="comment">// if we&#39;re doing auto-fan-out and this is the first time</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        mOutputCache-&gt;copySamplesFrom(outputBuffer);            <span class="comment">// store it in the buffer</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    mSequence = <a class="code" href="_c_s_l___types_8h.html#aa8b5c287842dfb1623ab53ea83c8a285">csl_max</a>(mSequence, outputBuffer.mSequence);     <span class="comment">// remember my seq #</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">//  this-&gt;changed((void *) &amp; outputBuffer);                     // signal dependents (if any) of my change</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;}</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">// Generic next buffer function: call the private (mono) version for each I/O channel;</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">// copy or expand depending on the mCopyPolicy;</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">// copy to the private cache in case of fan-out.</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div>
<div class="line"><a name="l00726"></a><span class="lineno"><a class="line" href="classcsl_1_1_unit_generator.html#ac2e590724c0a93b36ba2e9932930a2aa">  726</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_unit_generator.html#ac2e590724c0a93b36ba2e9932930a2aa">UnitGenerator::nextBuffer</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; outputBuffer) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordtype">unsigned</span> numOutputChannels = outputBuffer.mNumChannels;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordtype">unsigned</span> bufferByteSize = outputBuffer.mMonoBufferByteSize;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <a class="code" href="namespacecsl.html#a2e5ffaea3f06948bf8e7a26295dca9d5">SampleBuffer</a> buffer0 = outputBuffer.buffer(0);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;UnitGenerator::nextBuffer&quot;</span>);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">if</span> (checkFanOut(outputBuffer)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                                            <span class="comment">// Copy the output buffer samples</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordflow">switch</span> (mCopyPolicy) {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacecsl.html#ab643cfedf47a3924126b5ff703eae29baa9e680ac8d474993f51fe6cf33797807">kCopy</a>:                             <span class="comment">// compute 1 channel and copy it</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        this-&gt;nextBuffer(outputBuffer, 0);  <span class="comment">// this is where most of the work gets done in CSL</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 1; i &lt; numOutputChannels; i += mNumChannels)</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            memcpy (outputBuffer.buffer(i), buffer0, bufferByteSize);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacecsl.html#ab643cfedf47a3924126b5ff703eae29ba196bb6b87762914aaada00b2e2eae238">kExpand</a>:                           <span class="comment">// loop through the requested output channels</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; numOutputChannels; i += mNumChannels)</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            nextBuffer(outputBuffer, i);    <span class="comment">// call private nextBuffer per-channel</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacecsl.html#ab643cfedf47a3924126b5ff703eae29ba8a962be1944af47bcefc32855c5268d9">kIgnore</a>:                           <span class="comment">// Only do as many channels as I have</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        this-&gt;nextBuffer(outputBuffer, 0);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    }</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    handleFanOut(outputBuffer);             <span class="comment">// process possible fan-out</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;}</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">// Generic private next buffer implementation; by default, just zero out the buffer</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div>
<div class="line"><a name="l00755"></a><span class="lineno"><a class="line" href="classcsl_1_1_unit_generator.html#a875c2749e3c590a150e157e1be308677">  755</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_unit_generator.html#ac2e590724c0a93b36ba2e9932930a2aa">UnitGenerator::nextBuffer</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; outputBuffer, <span class="keywordtype">unsigned</span> outBufNum) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; mNumChannels; i++)</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        zeroBuffer(outputBuffer, i);        <span class="comment">// my subclasses do more interesting things here</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;}</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment">//-------------------------------------------------------------------------------------------------//</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">// Port implementation</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="preprocessor">#pragma mark Port</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div>
<div class="line"><a name="l00766"></a><span class="lineno"><a class="line" href="classcsl_1_1_port.html#a2cfb70a4b6d730e715042d646ec1d960">  766</a></span>&#160;<a class="code" href="classcsl_1_1_port.html#a2cfb70a4b6d730e715042d646ec1d960">Port::Port</a>() :</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                mUGen(NULL),</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                mBuffer(new <a class="code" href="classcsl_1_1_buffer.html">Buffer</a>(1, <a class="code" href="classcsl_1_1_c_gestalt.html">CGestalt</a>::blockSize())),</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                mValue(0),</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                mValuePtr(&amp; mValue),</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                mPtrIncrement(0) { }</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div>
<div class="line"><a name="l00773"></a><span class="lineno"><a class="line" href="classcsl_1_1_port.html#ae6a2f397cfcf05d67c23814ab23d3335">  773</a></span>&#160;<a class="code" href="classcsl_1_1_port.html#a2cfb70a4b6d730e715042d646ec1d960">Port::Port</a>(<a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> * ug) :</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                mUGen(ug),</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                mBuffer(new <a class="code" href="classcsl_1_1_buffer.html">Buffer</a>(ug-&gt;numChannels(), <a class="code" href="classcsl_1_1_c_gestalt.html">CGestalt</a>::blockSize())),</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                mValue(0),</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                mPtrIncrement(1) {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <a class="code" href="classcsl_1_1_port.html#a91a70fce4e5e9b9252668b430949677d">mBuffer</a>-&gt;<a class="code" href="classcsl_1_1_buffer.html#a6880eea0019e9ebf7a61ce542e52a23a">allocateBuffers</a>();</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <a class="code" href="classcsl_1_1_port.html#a47055191ec4fec00b3ca51659d6fdf85">mValuePtr</a> = <a class="code" href="classcsl_1_1_port.html#a91a70fce4e5e9b9252668b430949677d">mBuffer</a>-&gt;<a class="code" href="classcsl_1_1_buffer.html#ab05a54225ae97f9ed1ae30bbbc0fd14c">buffer</a>(0) - 1;     <span class="comment">// set to -1 since nextValue does pre-increment</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;}</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div>
<div class="line"><a name="l00782"></a><span class="lineno"><a class="line" href="classcsl_1_1_port.html#a93fd581566d9a9ae48bdf486822398dc">  782</a></span>&#160;<a class="code" href="classcsl_1_1_port.html#a2cfb70a4b6d730e715042d646ec1d960">Port::Port</a>(<span class="keywordtype">float</span> value) :</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                mUGen(NULL),</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                mBuffer(NULL),</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                mValue(value),</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                mValuePtr(&amp; mValue),</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                mPtrIncrement(0) { }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div>
<div class="line"><a name="l00789"></a><span class="lineno"><a class="line" href="classcsl_1_1_port.html#afe166c2a6b10ad34d47472a150366bc1">  789</a></span>&#160;<a class="code" href="classcsl_1_1_port.html#afe166c2a6b10ad34d47472a150366bc1">Port::~Port</a>() {</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;}</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">// check the port&#39;s buffer and allocate it if needed</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div>
<div class="line"><a name="l00796"></a><span class="lineno"><a class="line" href="classcsl_1_1_port.html#a81c5f3efaa9f2a4251a55e289d37a722">  796</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_port.html#a81c5f3efaa9f2a4251a55e289d37a722">Port::checkBuffer</a>() throw (<a class="code" href="classcsl_1_1_logic_error.html">LogicError</a>) {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html">Buffer</a> * buf = <a class="code" href="classcsl_1_1_port.html#a91a70fce4e5e9b9252668b430949677d">mBuffer</a>;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> * ug = <a class="code" href="classcsl_1_1_port.html#afea3a01573e6eb5ef24915c0b33555d0">mUGen</a>;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="keywordflow">if</span> (buf == 0)</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="keywordflow">throw</span> LogicError(<span class="stringliteral">&quot;Checking an unassigned buffer&quot;</span>);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">if</span> ((buf-&gt;<a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a> != ug-&gt;<a class="code" href="classcsl_1_1_unit_generator.html#a059f46216ac25c66303d4a4a0fc05908">numChannels</a>()) || (buf-&gt;<a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a> == 1)) {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        buf-&gt;<a class="code" href="classcsl_1_1_buffer.html#a24c3994dfe73ba91980273ab3ccf0fa6">freeBuffers</a>();</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        buf-&gt;<a class="code" href="classcsl_1_1_buffer.html#a8c25c9f605b0cdebd4626bf4795b286d">setSize</a>(ug-&gt;<a class="code" href="classcsl_1_1_unit_generator.html#a059f46216ac25c66303d4a4a0fc05908">numChannels</a>(), <a class="code" href="classcsl_1_1_c_gestalt.html#a307bdedc01034447bd623010a43a51d2">CGestalt::blockSize</a>());</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        buf-&gt;<a class="code" href="classcsl_1_1_buffer.html#a6880eea0019e9ebf7a61ce542e52a23a">allocateBuffers</a>();</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    }</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;}</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">// Call this to reset the pointer without re-pulling the input (see SumOfSines)</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div>
<div class="line"><a name="l00811"></a><span class="lineno"><a class="line" href="classcsl_1_1_port.html#a437e9e615217b7d3c305d933852d7d5a">  811</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_port.html#a437e9e615217b7d3c305d933852d7d5a">Port::resetPtr</a>() {</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classcsl_1_1_port.html#aadc0f6f06cf07f9e282403eeb87cec98">mPtrIncrement</a>)                              <span class="comment">// if I&#39;m dynamic</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <a class="code" href="classcsl_1_1_port.html#a47055191ec4fec00b3ca51659d6fdf85">mValuePtr</a> = (<a class="code" href="classcsl_1_1_port.html#a91a70fce4e5e9b9252668b430949677d">mBuffer</a>-&gt;<a class="code" href="classcsl_1_1_buffer.html#ab05a54225ae97f9ed1ae30bbbc0fd14c">buffer</a>(0)) - 1;   <span class="comment">// set to -1 since nextValue does pre-increment</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;}</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment">// Answer whether the receiver is active</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div>
<div class="line"><a name="l00818"></a><span class="lineno"><a class="line" href="classcsl_1_1_port.html#a6c979cd2b9c4d7dd363869a0df0474e4">  818</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classcsl_1_1_port.html#a6c979cd2b9c4d7dd363869a0df0474e4">Port::isActive</a>() {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classcsl_1_1_port.html#afea3a01573e6eb5ef24915c0b33555d0">mUGen</a> == NULL)</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <span class="keywordflow">return</span> (<span class="keyword">true</span>);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classcsl_1_1_port.html#afea3a01573e6eb5ef24915c0b33555d0">mUGen</a>-&gt;<a class="code" href="classcsl_1_1_unit_generator.html#ae17d9b2638d6ba280f8b8de87e5ac071">isActive</a>();</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;}</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="comment">// pretty-print the receiver</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div>
<div class="line"><a name="l00827"></a><span class="lineno"><a class="line" href="classcsl_1_1_port.html#a63b60f57376c48608cb179ae4233e406">  827</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_port.html#a63b60f57376c48608cb179ae4233e406">Port::dump</a>() {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;a Port with UGen = %x, value = %g, incr = %d&quot;</span>, <a class="code" href="classcsl_1_1_port.html#afea3a01573e6eb5ef24915c0b33555d0">mUGen</a>, <a class="code" href="classcsl_1_1_port.html#a4bf9fd0b4c3fcc5e6868c824f71d508a">mValue</a>, <a class="code" href="classcsl_1_1_port.html#aadc0f6f06cf07f9e282403eeb87cec98">mPtrIncrement</a>);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classcsl_1_1_port.html#afea3a01573e6eb5ef24915c0b33555d0">mUGen</a> != 0) {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;\t&quot;</span>);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <a class="code" href="classcsl_1_1_port.html#afea3a01573e6eb5ef24915c0b33555d0">mUGen</a>-&gt;<a class="code" href="classcsl_1_1_unit_generator.html#ae1172496abefc5458c0034bb72be2b73">dump</a>();</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    }</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;}</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment">//-------------------------------------------------------------------------------------------------//</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">// Controllable implementation -- Grab the dynamic values for the scale and offset controls</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment">///&lt; Destructor</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00841"></a><span class="lineno"><a class="line" href="classcsl_1_1_controllable.html#a1d14f63552c57bea7cba7e26c744bd40">  841</a></span>&#160; <a class="code" href="classcsl_1_1_controllable.html#a1d14f63552c57bea7cba7e26c744bd40">Controllable::~Controllable</a>() {</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keywordflow">for</span> (PortMap::iterator pos = <a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>.begin(); pos != <a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>.end(); pos++)</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        <span class="keyword">delete</span> (pos-&gt;second);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>.clear();</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;}</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div>
<div class="line"><a name="l00847"></a><span class="lineno"><a class="line" href="classcsl_1_1_controllable.html#ac7b24bdea3a33bdd7cf1bbe266787362">  847</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_controllable.html#ac7b24bdea3a33bdd7cf1bbe266787362">Controllable::pullInput</a>(<a class="code" href="classcsl_1_1_port.html">Port</a> * thePort, <span class="keywordtype">unsigned</span> numFrames) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Controllable::pullInput&quot;</span>);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="keywordflow">if</span> (thePort == NULL) {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Controllable::pullInput port == null!&quot;</span>);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    }</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> * theUG = thePort-&gt;mUGen;         <span class="comment">// get its UGen</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="keywordflow">if</span> (theUG == NULL) {                            <span class="comment">// if it&#39;s a static variable</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">//      logMsg(&quot;Controllable::pullInput UG == null!&quot;);</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="keywordflow">return</span>;                                     <span class="comment">// ignore it</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    }</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html">Buffer</a> * theBuffer = thePort-&gt;mBuffer;          <span class="comment">// else get the buffer</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="keywordflow">if</span> (theBuffer == NULL) {                        <span class="comment">// if it&#39;s a static variable</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Controllable::pullInput Buffer == null!&quot;</span>);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <span class="keywordflow">return</span>;                                     <span class="comment">// ignore it</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    }</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    thePort-&gt;checkBuffer();</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    theBuffer-&gt;<a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a> = numFrames;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    theBuffer-&gt;<a class="code" href="classcsl_1_1_buffer.html#a2f0cf286d7d9f91b4459e3a81a8c58df">mType</a> = <a class="code" href="namespacecsl.html#a5af458483d71530692674c12d94d67e7af150be1bd16d08aba03503029871090d">kSamples</a>;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    theBuffer-&gt;<a class="code" href="classcsl_1_1_buffer.html#adffa7078fa839efa88302a238e0ba8f8">zeroBuffers</a>();</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    </div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    theUG-&gt;<a class="code" href="classcsl_1_1_unit_generator.html#ac2e590724c0a93b36ba2e9932930a2aa">nextBuffer</a>(* theBuffer);         <span class="comment">//////// and ask the UGen for nextBuffer()</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment"></span>    </div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    theBuffer-&gt;<a class="code" href="classcsl_1_1_buffer.html#ad29437a569b9ebde64675830c54e313f">mIsPopulated</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    thePort-&gt;mValuePtr = (thePort-&gt;mBuffer-&gt;buffer(0)) - 1;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    thePort-&gt;mValueIndex = 0;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;}</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">// Controllable implementation -- this version writes into the buffer you pass it</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div>
<div class="line"><a name="l00879"></a><span class="lineno"><a class="line" href="classcsl_1_1_controllable.html#afe6bc5e9c1058ae28a4e0ba2b53b0f67">  879</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_controllable.html#ac7b24bdea3a33bdd7cf1bbe266787362">Controllable::pullInput</a>(<a class="code" href="classcsl_1_1_port.html">Port</a> * thePort, <a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; theBuffer) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="keywordflow">if</span> (thePort == NULL)</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> * theUG = thePort-&gt;mUGen;         <span class="comment">// get its UGen</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="keywordflow">if</span> (theUG == NULL)                              <span class="comment">// if it&#39;s a static variable</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <span class="keywordflow">return</span>;                                     <span class="comment">// ignore it</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    theUG-&gt;<a class="code" href="classcsl_1_1_unit_generator.html#ac2e590724c0a93b36ba2e9932930a2aa">nextBuffer</a>(theBuffer);           <span class="comment">///////// and ask the UGen for nextBuffer()</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment"></span>    </div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    theBuffer.mIsPopulated = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    thePort-&gt;mValuePtr = (theBuffer.buffer(0)) - 1;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    thePort-&gt;mValueIndex = 0;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;}</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">// Plug in a unit generator to the named input slot</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div>
<div class="line"><a name="l00894"></a><span class="lineno"><a class="line" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">  894</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">Controllable::addInput</a>(<a class="code" href="namespacecsl.html#ac5e77b55f839f35209cc64fd74d363d3">CSL_MAP_KEY</a> key, <a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> &amp; uGen) {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Controllable::set input \&quot;%d\&quot; UGen&quot;</span>, key);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <a class="code" href="classcsl_1_1_port.html">Port</a> * thePort = <a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>[key];      <span class="comment">// get the named port</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="keywordflow">if</span> (thePort != 0)                   <span class="comment">// if port found</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="keyword">delete</span> thePort;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    thePort = <span class="keyword">new</span> <a class="code" href="classcsl_1_1_port.html">Port</a>(&amp;uGen);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>[key] = thePort;             <span class="comment">// add it to the list of inputs</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    uGen.<a class="code" href="classcsl_1_1_unit_generator.html#ac552ea0ee58637e985321ed62920003a">addOutput</a>((<a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> *) <span class="keyword">this</span>); <span class="comment">// be sure to add me as an output of the other guy</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;}</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div>
<div class="line"><a name="l00906"></a><span class="lineno"><a class="line" href="classcsl_1_1_controllable.html#a9fd4d1266bb22a2212c61f82ab6ad005">  906</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">Controllable::addInput</a>(<a class="code" href="namespacecsl.html#ac5e77b55f839f35209cc64fd74d363d3">CSL_MAP_KEY</a> key, <span class="keywordtype">float</span> value) {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Controllable::set input \&quot;%d\&quot; to %g&quot;</span>, key, value);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <a class="code" href="classcsl_1_1_port.html">Port</a> * thePort = <a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>[key];      <span class="comment">// get the named port</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordflow">if</span> (thePort == 0) {                 <span class="comment">// if no port found</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        thePort = <span class="keyword">new</span> <a class="code" href="classcsl_1_1_port.html">Port</a>(value);</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>[key] = thePort;         <span class="comment">// add it to the list of inputs</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        thePort-&gt;<a class="code" href="classcsl_1_1_port.html#a4bf9fd0b4c3fcc5e6868c824f71d508a">mValue</a> = value;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;}</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment">// get a port</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div>
<div class="line"><a name="l00920"></a><span class="lineno"><a class="line" href="classcsl_1_1_controllable.html#a97af0aab15f5bd707c672dd450b630e6">  920</a></span>&#160;<a class="code" href="classcsl_1_1_port.html">Port</a> * <a class="code" href="classcsl_1_1_controllable.html#a97af0aab15f5bd707c672dd450b630e6">Controllable::getPort</a>(<a class="code" href="namespacecsl.html#ac5e77b55f839f35209cc64fd74d363d3">CSL_MAP_KEY</a> name) {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordflow">return</span>(<a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>[name]);</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;}</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment">// Pretty-print the receiver</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div>
<div class="line"><a name="l00926"></a><span class="lineno"><a class="line" href="classcsl_1_1_controllable.html#a1055d9ef86c3fd240d4ae1a90ed57531">  926</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_controllable.html#a1055d9ef86c3fd240d4ae1a90ed57531">Controllable::dump</a>() {</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;a Controllable with the map:&quot;</span>);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordflow">for</span> (PortMap::iterator pos = <a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>.begin(); pos != <a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>.end(); ++pos) {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <span class="keywordflow">switch</span> (pos-&gt;first) {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_c_s_l___types_8h.html#aed3b634395b2c92161cb228bccf540e0">CSL_FREQUENCY</a>:</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;    key: Frequency = UG: &quot;</span>);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_c_s_l___types_8h.html#a8395ee6986cbf72d7ffa2a1d465ff7b1">CSL_SCALE</a>:</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;    key: Scale = UG: &quot;</span>);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_c_s_l___types_8h.html#ac2aae4f821f0e6851e6e4add9a1fd630">CSL_OFFSET</a>:</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;    key: Offset = UG: &quot;</span>);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_c_s_l___types_8h.html#a4c47debb150e171f9020cf9b3b6cfae0">CSL_INPUT</a>:</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment">//      case CSL_INPUT_L:</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">//      case CSL_INPUT_R:</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;    key: Input = UG: &quot;</span>);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;    key: Other = UG: &quot;</span>);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        }</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        pos-&gt;second-&gt;dump(); <span class="comment">// go up the graph tree dumping inputs and controls</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;}</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment">/////////////////////////////////////////////////</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment">// Phased implementation -- Constructors</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div>
<div class="line"><a name="l00956"></a><span class="lineno"><a class="line" href="classcsl_1_1_phased.html#afe7582eb05093c556892ca954c08d9c1">  956</a></span>&#160;<a class="code" href="classcsl_1_1_phased.html#afe7582eb05093c556892ca954c08d9c1">Phased::Phased</a>() : <a class="code" href="classcsl_1_1_controllable.html">Controllable</a>(), mPhase(0.0f) {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>[<a class="code" href="_c_s_l___types_8h.html#aed3b634395b2c92161cb228bccf540e0">CSL_FREQUENCY</a>] = <span class="keyword">new</span> <a class="code" href="classcsl_1_1_port.html">Port</a>;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Phased::add freq input&quot;</span>);</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;}</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div>
<div class="line"><a name="l00963"></a><span class="lineno"><a class="line" href="classcsl_1_1_phased.html#a35cc9db15f8a3757bff9100e457f9e5f">  963</a></span>&#160;<a class="code" href="classcsl_1_1_phased.html#afe7582eb05093c556892ca954c08d9c1">Phased::Phased</a>(<a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> &amp; frequency, <span class="keywordtype">float</span> phase) : mPhase(phase) {</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    this-&gt;<a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">addInput</a>(<a class="code" href="_c_s_l___types_8h.html#aed3b634395b2c92161cb228bccf540e0">CSL_FREQUENCY</a>, frequency);</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Phased::add freq input&quot;</span>);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;}</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div>
<div class="line"><a name="l00970"></a><span class="lineno"><a class="line" href="classcsl_1_1_phased.html#a6718533ed4b4a1fd8147ff8f75436184">  970</a></span>&#160;<a class="code" href="classcsl_1_1_phased.html#afe7582eb05093c556892ca954c08d9c1">Phased::Phased</a>(<span class="keywordtype">float</span> frequency, <span class="keywordtype">float</span> phase) : mPhase(phase) {</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    this-&gt;<a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">addInput</a>(<a class="code" href="_c_s_l___types_8h.html#aed3b634395b2c92161cb228bccf540e0">CSL_FREQUENCY</a>, frequency);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Phased::add freq input&quot;</span>);</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;}</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div>
<div class="line"><a name="l00977"></a><span class="lineno"><a class="line" href="classcsl_1_1_phased.html#ac5ebcc5aaf42ae7f230b37cde1cf1080">  977</a></span>&#160;<a class="code" href="classcsl_1_1_phased.html#ac5ebcc5aaf42ae7f230b37cde1cf1080">Phased::~Phased</a>() { <span class="comment">/* ?? */</span> }</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment">// Accessors</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div>
<div class="line"><a name="l00981"></a><span class="lineno"><a class="line" href="classcsl_1_1_phased.html#a8b7cc24c72115c7d8cbdf6511665184a">  981</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_phased.html#a8b7cc24c72115c7d8cbdf6511665184a">Phased::setFrequency</a>(<a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> &amp; frequency) {</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    this-&gt;<a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">addInput</a>(<a class="code" href="_c_s_l___types_8h.html#aed3b634395b2c92161cb228bccf540e0">CSL_FREQUENCY</a>, frequency);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;}</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div>
<div class="line"><a name="l00985"></a><span class="lineno"><a class="line" href="classcsl_1_1_phased.html#a13269ce8f31f9461e70c2bebdad215a0">  985</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_phased.html#a8b7cc24c72115c7d8cbdf6511665184a">Phased::setFrequency</a>(<span class="keywordtype">float</span> frequency) {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    this-&gt;<a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">addInput</a>(<a class="code" href="_c_s_l___types_8h.html#aed3b634395b2c92161cb228bccf540e0">CSL_FREQUENCY</a>, frequency);</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;}</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment">// Scalable -- Constructors</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div>
<div class="line"><a name="l00991"></a><span class="lineno"><a class="line" href="classcsl_1_1_scalable.html#abf64a4db13b4b7fc2393b05a809456a6">  991</a></span>&#160;<a class="code" href="classcsl_1_1_scalable.html#abf64a4db13b4b7fc2393b05a809456a6">Scalable::Scalable</a>() {</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>[<a class="code" href="_c_s_l___types_8h.html#a8395ee6986cbf72d7ffa2a1d465ff7b1">CSL_SCALE</a>] = <span class="keyword">new</span> <a class="code" href="classcsl_1_1_port.html">Port</a>;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>[<a class="code" href="_c_s_l___types_8h.html#ac2aae4f821f0e6851e6e4add9a1fd630">CSL_OFFSET</a>] = <span class="keyword">new</span> <a class="code" href="classcsl_1_1_port.html">Port</a>;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Scalable::add null inputs&quot;</span>);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;}</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div>
<div class="line"><a name="l00999"></a><span class="lineno"><a class="line" href="classcsl_1_1_scalable.html#a1c01502c021f7383c5b84784d7a3402b">  999</a></span>&#160;<a class="code" href="classcsl_1_1_scalable.html#abf64a4db13b4b7fc2393b05a809456a6">Scalable::Scalable</a>(<span class="keywordtype">float</span> scale) {</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    this-&gt;<a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">addInput</a>(<a class="code" href="_c_s_l___types_8h.html#a8395ee6986cbf72d7ffa2a1d465ff7b1">CSL_SCALE</a>, scale);</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>[<a class="code" href="_c_s_l___types_8h.html#ac2aae4f821f0e6851e6e4add9a1fd630">CSL_OFFSET</a>] = <span class="keyword">new</span> <a class="code" href="classcsl_1_1_port.html">Port</a>;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Scalable::add scale input&quot;</span>);</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;}</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div>
<div class="line"><a name="l01007"></a><span class="lineno"><a class="line" href="classcsl_1_1_scalable.html#a3d0ffd25bb881ee5b27eb515c18f42ca"> 1007</a></span>&#160;<a class="code" href="classcsl_1_1_scalable.html#abf64a4db13b4b7fc2393b05a809456a6">Scalable::Scalable</a>(<span class="keywordtype">float</span> scale, <span class="keywordtype">float</span> offset)  {</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    this-&gt;<a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">addInput</a>(<a class="code" href="_c_s_l___types_8h.html#a8395ee6986cbf72d7ffa2a1d465ff7b1">CSL_SCALE</a>, scale);</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    this-&gt;<a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">addInput</a>(<a class="code" href="_c_s_l___types_8h.html#ac2aae4f821f0e6851e6e4add9a1fd630">CSL_OFFSET</a>, offset);</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Scalable::add scale/offset input values&quot;</span>);</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;}</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;</div>
<div class="line"><a name="l01015"></a><span class="lineno"><a class="line" href="classcsl_1_1_scalable.html#a7df2bc7cbdfcda9cbc8c07074f5b6cfa"> 1015</a></span>&#160;<a class="code" href="classcsl_1_1_scalable.html#abf64a4db13b4b7fc2393b05a809456a6">Scalable::Scalable</a>(<a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> &amp; scale, <span class="keywordtype">float</span> offset) {</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    this-&gt;<a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">addInput</a>(<a class="code" href="_c_s_l___types_8h.html#a8395ee6986cbf72d7ffa2a1d465ff7b1">CSL_SCALE</a>, scale);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    this-&gt;<a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">addInput</a>(<a class="code" href="_c_s_l___types_8h.html#ac2aae4f821f0e6851e6e4add9a1fd630">CSL_OFFSET</a>, offset);</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Scalable::add scale/offset input values&quot;</span>);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;}</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;</div>
<div class="line"><a name="l01023"></a><span class="lineno"><a class="line" href="classcsl_1_1_scalable.html#a97128b05b04c4e2568792e6005109a1c"> 1023</a></span>&#160;<a class="code" href="classcsl_1_1_scalable.html#abf64a4db13b4b7fc2393b05a809456a6">Scalable::Scalable</a>(<a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> &amp; scale, <a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> &amp; offset) {</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    this-&gt;<a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">addInput</a>(<a class="code" href="_c_s_l___types_8h.html#a8395ee6986cbf72d7ffa2a1d465ff7b1">CSL_SCALE</a>, scale);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    this-&gt;<a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">addInput</a>(<a class="code" href="_c_s_l___types_8h.html#ac2aae4f821f0e6851e6e4add9a1fd630">CSL_OFFSET</a>, offset);</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Scalable::add scale/offset input values&quot;</span>);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;}</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;</div>
<div class="line"><a name="l01031"></a><span class="lineno"><a class="line" href="classcsl_1_1_scalable.html#aee5e93b96e4c029bb1129c5f21af6feb"> 1031</a></span>&#160;<a class="code" href="classcsl_1_1_scalable.html#aee5e93b96e4c029bb1129c5f21af6feb">Scalable::~Scalable</a>() { </div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment">//  if (mInputs) {</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="comment">//      </span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;}</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="comment">// Scalable -- Accessors</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div>
<div class="line"><a name="l01039"></a><span class="lineno"><a class="line" href="classcsl_1_1_scalable.html#a27258611ca4769ec35e64954e03e5851"> 1039</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_scalable.html#a27258611ca4769ec35e64954e03e5851">Scalable::setScale</a>(<a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> &amp; scale) {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    this-&gt;<a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">addInput</a>(<a class="code" href="_c_s_l___types_8h.html#a8395ee6986cbf72d7ffa2a1d465ff7b1">CSL_SCALE</a>, scale);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Scalable::set scale input UG&quot;</span>);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;}</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div>
<div class="line"><a name="l01046"></a><span class="lineno"><a class="line" href="classcsl_1_1_scalable.html#addaddd6c42e4bfb0b6da04af43201b72"> 1046</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_scalable.html#a27258611ca4769ec35e64954e03e5851">Scalable::setScale</a>(<span class="keywordtype">float</span> scale) {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    this-&gt;<a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">addInput</a>(<a class="code" href="_c_s_l___types_8h.html#a8395ee6986cbf72d7ffa2a1d465ff7b1">CSL_SCALE</a>, scale);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Scalable::set scale input value&quot;</span>);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;}</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div>
<div class="line"><a name="l01053"></a><span class="lineno"><a class="line" href="classcsl_1_1_scalable.html#aff7c94c6f4dd75f322866500464c3739"> 1053</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_scalable.html#aff7c94c6f4dd75f322866500464c3739">Scalable::setOffset</a>(<a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> &amp; offset) {</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    this-&gt;<a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">addInput</a>(<a class="code" href="_c_s_l___types_8h.html#ac2aae4f821f0e6851e6e4add9a1fd630">CSL_OFFSET</a>, offset);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Scalable::set offset input UG&quot;</span>);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;}</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;</div>
<div class="line"><a name="l01060"></a><span class="lineno"><a class="line" href="classcsl_1_1_scalable.html#a60a35dd30304f03120bbeb42f4f62cf3"> 1060</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_scalable.html#aff7c94c6f4dd75f322866500464c3739">Scalable::setOffset</a>(<span class="keywordtype">float</span> offset) {</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    this-&gt;<a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">addInput</a>(<a class="code" href="_c_s_l___types_8h.html#ac2aae4f821f0e6851e6e4add9a1fd630">CSL_OFFSET</a>, offset);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Scalable::set offset input value&quot;</span>);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;}</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment">// trigger passed on here</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;</div>
<div class="line"><a name="l01069"></a><span class="lineno"><a class="line" href="classcsl_1_1_scalable.html#aea1b11dc8b91188467f2406cc50e4c10"> 1069</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_scalable.html#aea1b11dc8b91188467f2406cc50e4c10">Scalable::trigger</a>() {</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>[<a class="code" href="_c_s_l___types_8h.html#a8395ee6986cbf72d7ffa2a1d465ff7b1">CSL_SCALE</a>])</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>[<a class="code" href="_c_s_l___types_8h.html#a8395ee6986cbf72d7ffa2a1d465ff7b1">CSL_SCALE</a>]-&gt;trigger();</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>[<a class="code" href="_c_s_l___types_8h.html#ac2aae4f821f0e6851e6e4add9a1fd630">CSL_OFFSET</a>])</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>[<a class="code" href="_c_s_l___types_8h.html#ac2aae4f821f0e6851e6e4add9a1fd630">CSL_OFFSET</a>]-&gt;trigger();</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;}</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment">// answer whether scale = 1 &amp; offset = 0</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment">//void isScaled() {</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="comment">/////////////////////////////////////////////////</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="comment">// Effect implementation</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="preprocessor">#pragma mark Effect</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div>
<div class="line"><a name="l01088"></a><span class="lineno"><a class="line" href="classcsl_1_1_effect.html#a4dae74244f59936a49847da9217b4126"> 1088</a></span>&#160;<a class="code" href="classcsl_1_1_effect.html#a4dae74244f59936a49847da9217b4126">Effect::Effect</a>() : <a class="code" href="classcsl_1_1_controllable.html">Controllable</a>(), <a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a>() {</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <a class="code" href="classcsl_1_1_effect.html#ac9437c85619fd68d0816e328b2a33e05">isInline</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="comment">//  mInputs[CSL_INPUT] = new Port;</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Effect::add null input&quot;</span>);</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;}</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;</div>
<div class="line"><a name="l01096"></a><span class="lineno"><a class="line" href="classcsl_1_1_effect.html#a2b01e42fae64d962cc551331c1f120b3"> 1096</a></span>&#160;<a class="code" href="classcsl_1_1_effect.html#a4dae74244f59936a49847da9217b4126">Effect::Effect</a>(<a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> &amp; input) : <a class="code" href="classcsl_1_1_controllable.html">Controllable</a>(), <a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a>() {</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    <a class="code" href="classcsl_1_1_effect.html#ac9437c85619fd68d0816e328b2a33e05">isInline</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    mNumChannels = input.<a class="code" href="classcsl_1_1_unit_generator.html#a059f46216ac25c66303d4a4a0fc05908">numChannels</a>();</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    this-&gt;<a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">addInput</a>(<a class="code" href="_c_s_l___types_8h.html#a4c47debb150e171f9020cf9b3b6cfae0">CSL_INPUT</a>, input);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Effect::add input UG&quot;</span>);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;}</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div>
<div class="line"><a name="l01105"></a><span class="lineno"><a class="line" href="classcsl_1_1_effect.html#a841ade4126d16430eccbc3ecc3ff5142"> 1105</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classcsl_1_1_effect.html#a841ade4126d16430eccbc3ecc3ff5142">Effect::isActive</a>() {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <a class="code" href="classcsl_1_1_port.html">Port</a> * iPort = <a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>[<a class="code" href="_c_s_l___types_8h.html#a4c47debb150e171f9020cf9b3b6cfae0">CSL_INPUT</a>];</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="keywordflow">if</span> (iPort)</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <span class="keywordflow">return</span> (iPort-&gt;<a class="code" href="classcsl_1_1_port.html#a6c979cd2b9c4d7dd363869a0df0474e4">isActive</a>());</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;            <span class="comment">// subclasses might not use mInputs[CSL_INPUT]</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;}</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div>
<div class="line"><a name="l01112"></a><span class="lineno"><a class="line" href="classcsl_1_1_effect.html#a5aa7e299971049551d91d262e5d07c9a"> 1112</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_effect.html#a5aa7e299971049551d91d262e5d07c9a">Effect::setInput</a>(<a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> &amp; input) {</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <a class="code" href="classcsl_1_1_effect.html#ac9437c85619fd68d0816e328b2a33e05">isInline</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    this-&gt;<a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">addInput</a>(<a class="code" href="_c_s_l___types_8h.html#a4c47debb150e171f9020cf9b3b6cfae0">CSL_INPUT</a>, input);</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Effect::add input&quot;</span>);</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;}</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment">// Get my input&#39;s next buffer</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;</div>
<div class="line"><a name="l01122"></a><span class="lineno"><a class="line" href="classcsl_1_1_effect.html#a5bd3114c6d08f9b438c5ecccd833cddc"> 1122</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_effect.html#a5bd3114c6d08f9b438c5ecccd833cddc">Effect::pullInput</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; outputBuffer) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Effect::pullInput&quot;</span>);</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="keywordflow">if</span> (isInline)           <span class="comment">// if inline, just use the input pointer</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        mInputPtr = outputBuffer.buffer(0);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        <a class="code" href="classcsl_1_1_port.html">Port</a> * iPort = mInputs[<a class="code" href="_c_s_l___types_8h.html#a4c47debb150e171f9020cf9b3b6cfae0">CSL_INPUT</a>];</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                            <span class="comment">// else pull a buffer from my input</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        <a class="code" href="classcsl_1_1_controllable.html#ac7b24bdea3a33bdd7cf1bbe266787362">Controllable::pullInput</a>(iPort, outputBuffer);</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        </div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        mInputPtr = outputBuffer.buffer(0);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    }</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;}</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div>
<div class="line"><a name="l01137"></a><span class="lineno"><a class="line" href="classcsl_1_1_effect.html#a949fe181d09694b432e8d4e2ef2c3aa5"> 1137</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_effect.html#a5bd3114c6d08f9b438c5ecccd833cddc">Effect::pullInput</a>(<span class="keywordtype">unsigned</span> numFrames) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Effect::pullInput&quot;</span>);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <a class="code" href="classcsl_1_1_port.html">Port</a> * iPort = mInputs[<a class="code" href="_c_s_l___types_8h.html#a4c47debb150e171f9020cf9b3b6cfae0">CSL_INPUT</a>];</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <a class="code" href="classcsl_1_1_controllable.html#ac7b24bdea3a33bdd7cf1bbe266787362">Controllable::pullInput</a>(iPort, numFrames);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    mInputPtr = iPort-&gt;<a class="code" href="classcsl_1_1_port.html#a91a70fce4e5e9b9252668b430949677d">mBuffer</a>-&gt;<a class="code" href="classcsl_1_1_buffer.html#ab05a54225ae97f9ed1ae30bbbc0fd14c">buffer</a>(0);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;}</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="comment">///&lt; trigger passed on here</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01148"></a><span class="lineno"><a class="line" href="classcsl_1_1_effect.html#acb98ee8f880bfdf7019273d869042bc4"> 1148</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_effect.html#acb98ee8f880bfdf7019273d869042bc4">Effect::trigger</a>() {</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>[<a class="code" href="_c_s_l___types_8h.html#a4c47debb150e171f9020cf9b3b6cfae0">CSL_INPUT</a>])</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        <a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>[<a class="code" href="_c_s_l___types_8h.html#a4c47debb150e171f9020cf9b3b6cfae0">CSL_INPUT</a>]-&gt;trigger();</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;}</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="comment">// FanOut methods</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div>
<div class="line"><a name="l01155"></a><span class="lineno"><a class="line" href="classcsl_1_1_fan_out.html#a8c4c9515dfcbd824f58186ba25e8bbc1"> 1155</a></span>&#160;<a class="code" href="classcsl_1_1_fan_out.html#a8c4c9515dfcbd824f58186ba25e8bbc1">FanOut::FanOut</a>(<a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> &amp; in, <span class="keywordtype">unsigned</span> taps)</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        : <a class="code" href="classcsl_1_1_effect.html">Effect</a>(in), mNumFanOuts(taps), mCurrent(taps) {</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="preprocessor">#ifdef CSL_DEBUG</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;FanOut::FanOut %d&quot;</span>, <a class="code" href="classcsl_1_1_fan_out.html#a7d6ba642afac2f3704f2cb24696116f7">mNumFanOuts</a>);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;}</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;</div>
<div class="line"><a name="l01162"></a><span class="lineno"><a class="line" href="classcsl_1_1_fan_out.html#ae05e53c2dce766fc2aba30bddec36faf"> 1162</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_fan_out.html#a4b130e104c39c1e285912cd8c0f3fa52">FanOut::nextBuffer</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; outputBuffer,  <span class="keywordtype">unsigned</span> outBufNum) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="classcsl_1_1_logic_error.html">LogicError</a>(<span class="stringliteral">&quot;Asking for mono nextBuffer of a FanOut&quot;</span>);</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;}</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="comment">// nextBuffer just pulls the input every &quot;mOutputs&quot; calls</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div>
<div class="line"><a name="l01168"></a><span class="lineno"><a class="line" href="classcsl_1_1_fan_out.html#a4b130e104c39c1e285912cd8c0f3fa52"> 1168</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_fan_out.html#a4b130e104c39c1e285912cd8c0f3fa52">FanOut::nextBuffer</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; outputBuffer) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="keywordflow">if</span> (outputBuffer.mNumChannels != mNumChannels) </div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classcsl_1_1_logic_error.html">LogicError</a>(<span class="stringliteral">&quot;Asking for wrong output ch # of a FanOut&quot;</span>);</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">if</span> (mCurrent &gt;= mNumFanOuts) {</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        pullInput(outputBuffer.mNumFrames);</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        mCurrent = 0;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="comment">//      logMsg(&quot;    reset&quot;);</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    }                       <span class="comment">// Copy the output buffer samples</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html">Buffer</a> * buf = mInputs[<a class="code" href="_c_s_l___types_8h.html#a4c47debb150e171f9020cf9b3b6cfae0">CSL_INPUT</a>]-&gt;mBuffer;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    outputBuffer.<a class="code" href="classcsl_1_1_buffer.html#a36b0e60af8a42fcd821c7f920387111c">copyOnlySamplesFrom</a>(*buf);</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="comment">//  logMsg(&quot;FanOut %d&quot;, mCurrent);</span></div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    mCurrent++;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;}</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="comment">// Splitter class -- a de-multiplexer for multi-channel signals</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;</div>
<div class="line"><a name="l01184"></a><span class="lineno"><a class="line" href="classcsl_1_1_splitter.html#a755b03cdd8699bdd2607685e7566f62d"> 1184</a></span>&#160;<a class="code" href="classcsl_1_1_splitter.html#a755b03cdd8699bdd2607685e7566f62d">Splitter::Splitter</a>(<a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> &amp; in) </div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        : <a class="code" href="classcsl_1_1_fan_out.html">FanOut</a>(in, in.numChannels()) { }</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div>
<div class="line"><a name="l01187"></a><span class="lineno"><a class="line" href="classcsl_1_1_splitter.html#ac768564390313eabbbb2334dcdf7b21e"> 1187</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_splitter.html#a0dbd021da14039d2414d1b976f42b33f">Splitter::nextBuffer</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; outputBuffer,  <span class="keywordtype">unsigned</span> outBufNum) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="classcsl_1_1_logic_error.html">LogicError</a>(<span class="stringliteral">&quot;Asking for mono nextBuffer of a Splitter&quot;</span>);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;}</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="comment">// Like for FanOut, next-buffer calls the input every mOutput calls, </span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="comment">// but it only copies one channel at a time to the output</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div>
<div class="line"><a name="l01194"></a><span class="lineno"><a class="line" href="classcsl_1_1_splitter.html#a0dbd021da14039d2414d1b976f42b33f"> 1194</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_splitter.html#a0dbd021da14039d2414d1b976f42b33f">Splitter::nextBuffer</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; outputBuffer) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="keywordflow">if</span> (outputBuffer.mNumChannels != 1) </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classcsl_1_1_logic_error.html">LogicError</a>(<span class="stringliteral">&quot;Asking for a stereo output of a channel splitter&quot;</span>);</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                                <span class="comment">// pull input</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="keywordflow">if</span> (mCurrent &gt;= mNumFanOuts) {</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        pullInput(outputBuffer.mNumFrames);</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        mCurrent = 0;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    }</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html">Buffer</a> * buf = mInputs[<a class="code" href="_c_s_l___types_8h.html#a4c47debb150e171f9020cf9b3b6cfae0">CSL_INPUT</a>]-&gt;mBuffer;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="keywordflow">if</span> (buf == 0) </div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classcsl_1_1_logic_error.html">LogicError</a>(<span class="stringliteral">&quot;Missing buffer in channel splitter&quot;</span>);</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="keywordtype">unsigned</span> bufferByteSize = outputBuffer.mMonoBufferByteSize;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <a class="code" href="namespacecsl.html#a2e5ffaea3f06948bf8e7a26295dca9d5">SampleBuffer</a> dest = outputBuffer.buffer(0);</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <a class="code" href="namespacecsl.html#a2e5ffaea3f06948bf8e7a26295dca9d5">SampleBuffer</a> src = buf-&gt;<a class="code" href="classcsl_1_1_buffer.html#ab05a54225ae97f9ed1ae30bbbc0fd14c">buffer</a>(mCurrent);</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    memcpy(dest, src, bufferByteSize);</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    mCurrent++;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;}</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment">// Joiner class -- a multiplexer for multi-channel signals</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;</div>
<div class="line"><a name="l01214"></a><span class="lineno"><a class="line" href="classcsl_1_1_joiner.html#aaa38a109281c9e1527e619eb2d25ad39"> 1214</a></span>&#160;<a class="code" href="classcsl_1_1_joiner.html#a501ec2a025f7a4098e343ce3316dcb19">Joiner::Joiner</a>(<a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> &amp; in1, <a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> &amp; in2) : <a class="code" href="classcsl_1_1_effect.html">Effect</a>() {</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">Controllable::addInput</a>(0, in1);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">Controllable::addInput</a>(1, in2);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    mNumChannels = 2;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;}</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;</div>
<div class="line"><a name="l01220"></a><span class="lineno"><a class="line" href="classcsl_1_1_joiner.html#aae3f476894c9ff87f12bc83db3ff2742"> 1220</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_joiner.html#aae3f476894c9ff87f12bc83db3ff2742">Joiner::addInput</a>(<a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> &amp; in) { <span class="comment">///&lt; add the argument to vector of inputs</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment"></span>    <a class="code" href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">Controllable::addInput</a>(mNumChannels, in);</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    mNumChannels++;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;}</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div>
<div class="line"><a name="l01225"></a><span class="lineno"><a class="line" href="classcsl_1_1_joiner.html#a3cef8b62225ed147ab21adcf05211699"> 1225</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classcsl_1_1_joiner.html#a3cef8b62225ed147ab21adcf05211699">Joiner::isActive</a>() {</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; <a class="code" href="classcsl_1_1_unit_generator.html#a905d2cd8a1d8ac233fdb025d1a545205">mNumChannels</a>; i++) {</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>[i]-&gt;mUGen-&gt;isActive())</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    }</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;}</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div>
<div class="line"><a name="l01234"></a><span class="lineno"><a class="line" href="classcsl_1_1_joiner.html#ac436b17ab463bb26407ec534cb3e0a83"> 1234</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_joiner.html#ab68c6ad73067d37f7c93c2676297266d">Joiner::nextBuffer</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; outputBuffer,  <span class="keywordtype">unsigned</span> outBufNum) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <span class="keywordflow">throw</span> <a class="code" href="classcsl_1_1_logic_error.html">LogicError</a>(<span class="stringliteral">&quot;Asking for mono nextBuffer of a Joiner&quot;</span>);</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;}</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;<span class="comment">// nextBuffer calls each of the input channels as a mono channel</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div>
<div class="line"><a name="l01240"></a><span class="lineno"><a class="line" href="classcsl_1_1_joiner.html#ab68c6ad73067d37f7c93c2676297266d"> 1240</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_joiner.html#ab68c6ad73067d37f7c93c2676297266d">Joiner::nextBuffer</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; outputBuffer) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <span class="keywordflow">if</span> (outputBuffer.mNumChannels != mNumChannels) {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classcsl_1_1_logic_error.html">LogicError</a>(<span class="stringliteral">&quot;Wrong number of channels in a joiner&quot;</span>);</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    }</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                        <span class="comment">// set up the fake mono buffer</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <a class="code" href="classcsl_1_1_buffer.html">Buffer</a> tempBuffer(1, outputBuffer.mNumFrames);</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                        <span class="comment">// loop through the mono inputs</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; mNumChannels; i++) {</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                        <span class="comment">// put the mono in samples into 1 channel of the output</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        tempBuffer.<a class="code" href="classcsl_1_1_buffer.html#a3430abf7c9c920e18e50a1a5e436f6f5">setBuffer</a>(0, outputBuffer.buffer(i));</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                        <span class="comment">// get a buffer of mono samples from one of the inputs</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        mInputs[i]-&gt;mUGen-&gt;nextBuffer(tempBuffer);</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    }</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;}</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="comment">///&lt; trigger passed on here</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01258"></a><span class="lineno"><a class="line" href="classcsl_1_1_joiner.html#a7c3fe07f9921302b9f2bdbb8b59d559a"> 1258</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_joiner.html#a7c3fe07f9921302b9f2bdbb8b59d559a">Joiner::trigger</a>() {</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; <a class="code" href="classcsl_1_1_unit_generator.html#a905d2cd8a1d8ac233fdb025d1a545205">mNumChannels</a>; i++)</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        <a class="code" href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">mInputs</a>[i]-&gt;<a class="code" href="classcsl_1_1_joiner.html#a7c3fe07f9921302b9f2bdbb8b59d559a">trigger</a>();</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;}</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;<span class="comment">// Writeable implementation</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;</div>
<div class="line"><a name="l01265"></a><span class="lineno"><a class="line" href="classcsl_1_1_writeable.html#ac402dc4b6151052465f5ca9c4554b7a0"> 1265</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_writeable.html#a8985abc457cabe1595d704642216b413">Writeable::writeBuffer</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; inputBuffer, <span class="keywordtype">unsigned</span> bufNum) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                <span class="comment">// no-op here</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;}</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;</div>
<div class="line"><a name="l01269"></a><span class="lineno"><a class="line" href="classcsl_1_1_writeable.html#a8985abc457cabe1595d704642216b413"> 1269</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_writeable.html#a8985abc457cabe1595d704642216b413">Writeable::writeBuffer</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; inputBuffer) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="keywordtype">unsigned</span> numBufs = inputBuffer.mNumChannels;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; numBufs; i++)</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        writeBuffer(inputBuffer, i);</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;}</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="comment">// Seekable</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;</div>
<div class="line"><a name="l01277"></a><span class="lineno"><a class="line" href="classcsl_1_1_seekable.html#a28b5bad4f2349398de3c6d09304fef4c"> 1277</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_seekable.html#a28b5bad4f2349398de3c6d09304fef4c">Seekable::reset</a>() throw (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {     <span class="comment">// reset-to-zero</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="keywordtype">int</span> pos = <a class="code" href="classcsl_1_1_seekable.html#a879b7ddb825a6ce724a08c4631f25e4f">seekTo</a>(0, <a class="code" href="namespacecsl.html#ad581b11596079b5e108e260d8480380ca007f48e136a6bcf5ee1caa803182b2a5">kPositionStart</a>);</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <span class="keywordflow">if</span> (pos == 0)</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classcsl_1_1_i_o_error.html">IOError</a>(<span class="stringliteral">&quot;Error seeking&quot;</span>);</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;}</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="comment">// Interleave = copy from CSL-style Buffer object to an interleaved sample vector</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div>
<div class="line"><a name="l01285"></a><span class="lineno"><a class="line" href="classcsl_1_1_interleaver.html#a7d0fe9c9f181585c097a8772a7974c2f"> 1285</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_interleaver.html#a7d0fe9c9f181585c097a8772a7974c2f">Interleaver::interleave</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; output, <a class="code" href="namespacecsl.html#a2e5ffaea3f06948bf8e7a26295dca9d5">SampleBuffer</a> samples, </div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;            <span class="keywordtype">unsigned</span> numFrames, <span class="keywordtype">unsigned</span> numChannels) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="keywordtype">unsigned</span> numOutputChannels = output.mNumChannels;</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <span class="keywordtype">unsigned</span> numChannelsToInterleave = <a class="code" href="_c_s_l___types_8h.html#ae8ec6a68799a96c76a1e37d9632fda38">csl_min</a>(numOutputChannels, numChannels);</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <span class="keywordtype">unsigned</span> numChannelsBeyond = numChannels - numChannelsToInterleave;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> frame = 0; frame &lt; numFrames; frame++) {</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> channel = 0; channel &lt; numChannelsToInterleave; channel++)</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;            *samples++ = output.buffer(channel)[frame];</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> j = 0; j &lt; numChannelsBeyond; j++)</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;            *samples++ = 0;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    }</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;}</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="comment">// Interleave, short * version</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div>
<div class="line"><a name="l01302"></a><span class="lineno"><a class="line" href="classcsl_1_1_interleaver.html#a54ebec0096077a4fef2f5031d9036b89"> 1302</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_interleaver.html#a7d0fe9c9f181585c097a8772a7974c2f">Interleaver::interleave</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; output, <span class="keywordtype">short</span> * samples, <span class="keywordtype">unsigned</span> numFrames, </div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;            <span class="keywordtype">unsigned</span> numChannels) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="keywordtype">unsigned</span> numOutputChannels = output.mNumChannels;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <span class="keywordtype">unsigned</span> numChannelsToInterleave = <a class="code" href="_c_s_l___types_8h.html#ae8ec6a68799a96c76a1e37d9632fda38">csl_min</a>(numOutputChannels, numChannels);</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="keywordtype">unsigned</span> numChannelsBeyond = numChannels - numChannelsToInterleave;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> frame = 0; frame &lt; numFrames; frame++) {</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> channel = 0; channel &lt; numChannelsToInterleave; channel++)</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;            *samples++ = (<span class="keywordtype">short</span>) ((output.buffer(channel)[frame]) * 32767.0);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> j = 0; j &lt; numChannelsBeyond; j++)</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            *samples++ = 0;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    }</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;}</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="comment">/// Remap = re-assign channels from the source buffer to the target while interleaving</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01319"></a><span class="lineno"><a class="line" href="classcsl_1_1_interleaver.html#ac6a5443222ca7f3e9b9ba9add9ad8b44"> 1319</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_interleaver.html#ac6a5443222ca7f3e9b9ba9add9ad8b44">Interleaver::interleaveAndRemap</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; output, <a class="code" href="namespacecsl.html#a2e5ffaea3f06948bf8e7a26295dca9d5">SampleBuffer</a> samples, <span class="keywordtype">unsigned</span> numFrames, </div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;            <span class="keywordtype">unsigned</span> numChannels, <span class="keywordtype">unsigned</span> *channelMap) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    <span class="keywordtype">unsigned</span> numOutputChannels = output.mNumChannels;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <span class="keywordtype">unsigned</span> numChannelsToInterleave = <a class="code" href="_c_s_l___types_8h.html#ae8ec6a68799a96c76a1e37d9632fda38">csl_min</a>(numOutputChannels, numChannels);</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    <span class="keywordtype">unsigned</span> numChannelsBeyond = numChannels - numChannelsToInterleave;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <span class="keywordtype">unsigned</span> *map = channelMap;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> frame = 0; frame &lt; numFrames; frame++) {</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> channel = 0; channel &lt; numChannelsToInterleave; channel++)</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;            *samples++ = output.buffer(map[channel])[frame];</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> j = 0; j &lt; numChannelsBeyond; j++)</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;            *samples++ = 0;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    }</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;}</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="comment">// De-interleave = copy from interleaved SampleBuffer to CSL Buffer object</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;</div>
<div class="line"><a name="l01337"></a><span class="lineno"><a class="line" href="classcsl_1_1_interleaver.html#a03eae89a87ec9a72bae6496b3f1fa02c"> 1337</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_interleaver.html#a03eae89a87ec9a72bae6496b3f1fa02c">Interleaver::deinterleave</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; output, <a class="code" href="namespacecsl.html#a2e5ffaea3f06948bf8e7a26295dca9d5">SampleBuffer</a> samples, <span class="keywordtype">unsigned</span> numFrames, </div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;            <span class="keywordtype">unsigned</span> numChannels) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <span class="keywordtype">unsigned</span> numOutputChannels = output.mNumChannels;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="keywordtype">unsigned</span> numChannelsToDeinterleave = <a class="code" href="_c_s_l___types_8h.html#ae8ec6a68799a96c76a1e37d9632fda38">csl_min</a>(numOutputChannels, numChannels);</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <a class="code" href="namespacecsl.html#a2e5ffaea3f06948bf8e7a26295dca9d5">SampleBuffer</a> currentOutputBuffer;</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <a class="code" href="namespacecsl.html#a2e5ffaea3f06948bf8e7a26295dca9d5">SampleBuffer</a> inputBuffer;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <span class="keywordtype">unsigned</span> i;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; numChannelsToDeinterleave; i++) {</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        currentOutputBuffer = output.buffer(i);</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        inputBuffer = samples + i;</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> j = 0; j &lt; numFrames; j++, inputBuffer += numChannels) {</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;            *currentOutputBuffer++ = *inputBuffer;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;        }</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    }</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <span class="keywordflow">if</span> (numOutputChannels &gt; numChannelsToDeinterleave) {</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;        <span class="keywordflow">for</span> (i = numChannelsToDeinterleave; i &lt; numOutputChannels; i++)</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            memset(output.buffer(i), 0, output.mMonoBufferByteSize);</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    }</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;}</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="comment">// De-interleave, short * version</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;</div>
<div class="line"><a name="l01361"></a><span class="lineno"><a class="line" href="classcsl_1_1_interleaver.html#ac535af3d6e556b168d7a4397f997922f"> 1361</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_interleaver.html#a03eae89a87ec9a72bae6496b3f1fa02c">Interleaver::deinterleave</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; output, <span class="keywordtype">short</span> * samples, <span class="keywordtype">unsigned</span> numFrames, </div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;            <span class="keywordtype">unsigned</span> numChannels) <span class="keywordflow">throw</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <span class="keywordtype">unsigned</span> numOutputChannels = output.mNumChannels;</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="keywordtype">unsigned</span> numChannelsToDeinterleave = <a class="code" href="_c_s_l___types_8h.html#ae8ec6a68799a96c76a1e37d9632fda38">csl_min</a>(numOutputChannels, numChannels);</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <a class="code" href="namespacecsl.html#a2e5ffaea3f06948bf8e7a26295dca9d5">SampleBuffer</a> currentOutputBuffer;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <span class="keywordtype">short</span> * inputBuffer;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="keywordtype">unsigned</span> i;</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; numChannelsToDeinterleave; i++) {</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;        currentOutputBuffer = output.buffer(i);</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;        inputBuffer = samples + i;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> j = 0; j &lt; numFrames; j++, inputBuffer += numChannels) {</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;            *currentOutputBuffer++ = ((float )*inputBuffer) / 32767.0f;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        }</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    }</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="keywordflow">if</span> (numOutputChannels &gt; numChannelsToDeinterleave) {</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        <span class="keywordflow">for</span> (i = numChannelsToDeinterleave; i &lt; numOutputChannels; i++)</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;            memset(output.buffer(i), 0, output.mMonoBufferByteSize);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    }</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;}</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="comment">//////////////////////////// IO class methods /////////////////////////////////</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="comment">// Global array of all known IO devices</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;</div>
<div class="line"><a name="l01387"></a><span class="lineno"><a class="line" href="_c_s_l___core_8cpp.html#aff1ac57c0322123d7fbf7f9c65d30af0"> 1387</a></span>&#160;vector &lt; IODevice *&gt; <a class="code" href="_c_s_l___core_8cpp.html#aff1ac57c0322123d7fbf7f9c65d30af0">gIODevices</a>;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="comment">// General IO Constructors in all modes</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;<span class="preprocessor">#pragma mark IO</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;</div>
<div class="line"><a name="l01393"></a><span class="lineno"><a class="line" href="classcsl_1_1_i_o.html#a8d8936fa9d9812c1d9c5787edb8d55d4"> 1393</a></span>&#160;<a class="code" href="classcsl_1_1_i_o.html#a8d8936fa9d9812c1d9c5787edb8d55d4">IO::IO</a>(<span class="keywordtype">unsigned</span> s_rate, <span class="keywordtype">unsigned</span> b_size, <span class="keywordtype">int</span> in_device, <span class="keywordtype">int</span> out_device, </div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;                <span class="keywordtype">unsigned</span> in_chans, <span class="keywordtype">unsigned</span> out_chans)</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        : mGraph(NULL), mInputBuffer(0, 0), mOutputBuffer(0, 0), mCaptureBuffer(0, 0),</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;          mNumFramesPlayed(0), mSequence(0), <a class="code" href="_c_gestalt_8cpp.html#a66f17dbb1cc7a89be03ce3b6a302668a">mLoggingPeriod</a>(<a class="code" href="classcsl_1_1_c_gestalt.html">CGestalt</a>::loggingPeriod()),</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;          <a class="code" href="_c_gestalt_8cpp.html#a22de467cbe5c4aa7c6ceda1d61d9369f">mNumInChannels</a>(in_chans), <a class="code" href="_c_gestalt_8cpp.html#afa73767d4305689d41adfab852ba915f">mNumOutChannels</a>(out_chans), </div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;          mNumRealInChannels(in_chans), mNumRealOutChannels(out_chans),</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;          mStatus(<a class="code" href="namespacecsl.html#a440dbcbda1bbc58f088ae31dfbcb3f67a4a3159bbf70e3934011566b8051080d3">kIONew</a>), mInterleaved(false) {</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;Create IO: %d s @ %d Hz; %d i %d o&quot;</span>, b_size, s_rate, in_chans, out_chans);</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;}</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="comment">// set/clear the root generator</span></div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;</div>
<div class="line"><a name="l01405"></a><span class="lineno"><a class="line" href="classcsl_1_1_i_o.html#a0cd73786ea896b62cf0ec3e3e0367dd8"> 1405</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_i_o.html#a0cd73786ea896b62cf0ec3e3e0367dd8">IO::setRoot</a>(<a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> &amp; root) {</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    root.<a class="code" href="classcsl_1_1_unit_generator.html#ac552ea0ee58637e985321ed62920003a">addOutput</a>((<a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> *) <span class="keyword">this</span>);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <a class="code" href="classcsl_1_1_i_o.html#af8690c5e8a8f34a0b10b74f3cd066063">mGraph</a> = &amp; root;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;}</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;</div>
<div class="line"><a name="l01410"></a><span class="lineno"><a class="line" href="classcsl_1_1_i_o.html#a538b273c6de621b2e38266e6216bde1c"> 1410</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_i_o.html#a538b273c6de621b2e38266e6216bde1c">IO::clearRoot</a>() {</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classcsl_1_1_i_o.html#af8690c5e8a8f34a0b10b74f3cd066063">mGraph</a> != NULL)</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;        <a class="code" href="classcsl_1_1_i_o.html#af8690c5e8a8f34a0b10b74f3cd066063">mGraph</a>-&gt;<a class="code" href="classcsl_1_1_unit_generator.html#a33dc32beaa3144b33c7b3c639be2e5ed">removeOutput</a>((<a class="code" href="classcsl_1_1_unit_generator.html">UnitGenerator</a> *) <span class="keyword">this</span>);</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <a class="code" href="classcsl_1_1_i_o.html#af8690c5e8a8f34a0b10b74f3cd066063">mGraph</a> = NULL;</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;}</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;<span class="comment">// increment and answer my seq #</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;</div>
<div class="line"><a name="l01418"></a><span class="lineno"><a class="line" href="classcsl_1_1_i_o.html#af2075a50a32bf0cfddae3183b37e0959"> 1418</a></span>&#160;<span class="keywordtype">unsigned</span> <a class="code" href="classcsl_1_1_i_o.html#af2075a50a32bf0cfddae3183b37e0959">IO::getAndIncrementSequence</a>() {</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <a class="code" href="classcsl_1_1_i_o.html#afc645076ff45980d4b9d8c2209f55850">mSequence</a>++;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classcsl_1_1_i_o.html#afc645076ff45980d4b9d8c2209f55850">mSequence</a>;</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;}</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="comment">// IO method to call a CSL client&#39;s DSP graph</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;</div>
<div class="line"><a name="l01425"></a><span class="lineno"><a class="line" href="classcsl_1_1_i_o.html#a7cca2bf79735626d7ab93684554e0bff"> 1425</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_i_o.html#a7cca2bf79735626d7ab93684554e0bff">IO::pullInput</a>(<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; outBuffer, <a class="code" href="namespacecsl.html#a2e5ffaea3f06948bf8e7a26295dca9d5">SampleBuffer</a> out) <span class="keywordflow">throw</span>(<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;<span class="preprocessor">#ifdef DO_TIMING</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <span class="keyword">static</span> <span class="keyword">struct </span>timeval * mte = &amp; mThen;</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <span class="keyword">static</span> <span class="keyword">struct </span>timeval * mno = &amp; mNow;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <a class="code" href="_c_s_l___core_8h.html#a90d5947d135344a0bb399047f0ffc890">GET_TIME</a>(mte);</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    maxSampEver = 0.0f;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="comment">//  unsigned numFrames = outBuffer.mNumFrames;</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;<span class="comment">//  unsigned numChans = outBuffer.mNumChannels;</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    </div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <span class="keywordflow">if</span> (mGraph) {</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;        <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;            outBuffer.mSequence = this-&gt;getAndIncrementSequence();</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;            </div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;            mGraph-&gt;nextBuffer(outBuffer);      <span class="comment">////// call the graph&#39;s nextBuffer method //////</span></div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="comment"></span>            <span class="keywordflow">if</span> (mCaptureBuffer.mNumFrames &gt; 0) {</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;                mCaptureBuffer.copySamplesFromTo(outBuffer, mOffset);</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;                mOffset += outBuffer.mNumFrames;</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;            }</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        } <span class="keywordflow">catch</span> (<a class="code" href="classcsl_1_1_c_exception.html">CException</a> ex) {</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;                            <span class="comment">// handler: log error and play silence</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;            <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<a class="code" href="namespacecsl.html#abac90833d4619f34250e6a669ff127c7a32856b6dbfa48d010094cd39ef0ebdb7">kLogError</a>, <span class="stringliteral">&quot;An error occured in the CSL nextBuffer method: %s\n&quot;</span>, </div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;                    ex.<a class="code" href="classcsl_1_1_c_exception.html#a82f57e285f07ca934823977ed3d364e3">mMessage</a>.c_str());</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;<span class="comment">//          memset(out, 0, (numFrames * numChans * sizeof(sample)));</span></div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        }</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    }</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="preprocessor">#ifdef DO_TIMING</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <a class="code" href="_c_s_l___core_8h.html#a90d5947d135344a0bb399047f0ffc890">GET_TIME</a>(mno);</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    printTimeStatistics(mno, mte, &amp; mThisSec, &amp; mTimeSum, &amp; mTimeVals);</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;}</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="preprocessor">#ifdef CSL_WINDOWS</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="preprocessor">#ifdef DO_TIMING        // DO_TIMING </span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;int (timeval *val, <span class="keywordtype">void</span> * e) {</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    LARGE_INTEGER ticksPerSecond;</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    LARGE_INTEGER tick;   <span class="comment">// A point in time</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;                    <span class="comment">// get the high resolution counter&#39;s accuracy</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    QueryPerformanceFrequency(&amp;ticksPerSecond);</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <span class="keywordtype">float</span> ticksPerUSecond = ticksPerSecond.QuadPart / 1000000;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                    <span class="comment">// what time is it?</span></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    QueryPerformanceCounter(&amp;tick);</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    val-&gt;tv_sec = tick.QuadPart/ticksPerSecond.QuadPart;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    val-&gt;tv_usec = tick.QuadPart/ticksPerUSecond;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;<span class="comment">//  cerr &lt;&lt; &quot;Fraction: &quot; &lt;&lt; val-&gt;tv_sec &lt;&lt; &quot;/&quot; &lt;&lt; val-&gt;tv_usec  &lt;&lt; &quot; &quot; &lt;&lt; ticksPerUSecond &lt;&lt; endl;</span></div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;}</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="comment">// IO Timing method</span></div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;<span class="preprocessor">#ifdef DO_TIMING</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;<span class="comment">//#include &quot;Mixer.h&quot;</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;<span class="comment">//#include &quot;Instrument.h&quot;</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="comment">//extern std::vector&lt;Instrument *&gt; gInstLibrary;</span></div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;</div>
<div class="line"><a name="l01486"></a><span class="lineno"><a class="line" href="classcsl_1_1_i_o.html#adc6975037c1beec8dadf8f4bb1405549"> 1486</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_i_o.html#adc6975037c1beec8dadf8f4bb1405549">IO::printTimeStatistics</a>(<span class="keyword">struct</span> timeval * now, <span class="keyword">struct</span> timeval * then, <span class="keywordtype">long</span> * thisSec, </div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;                        <span class="keywordtype">long</span> * timeSum, <span class="keywordtype">long</span> * timeVals) {</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <span class="keywordflow">if</span> (now-&gt;tv_sec - * thisSec &gt; (<span class="keywordtype">long</span>) <a class="code" href="classcsl_1_1_i_o.html#a297e157c9f133ea1d9face8f08165478">mLoggingPeriod</a>) {      <span class="comment">// print stats once every so often</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;        *thisSec = now-&gt;tv_sec;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;        <span class="keywordflow">if</span> (*timeSum != 0.0) {                                  <span class="comment">// print and reset counters</span></div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;            <span class="keywordtype">float</span> cycleTime = (float) <a class="code" href="classcsl_1_1_c_gestalt.html#a307bdedc01034447bd623010a43a51d2">CGestalt::blockSize</a>() * 1000000.0f / <a class="code" href="classcsl_1_1_c_gestalt.html#a888542479f14417d3546278bcde01756">CGestalt::frameRateF</a>();</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;                                                                <span class="comment">// remember % usage</span></div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;            <a class="code" href="classcsl_1_1_i_o.html#a03a3a04552d3c4862dceffdc6d513376">mUsage</a> = (float) *timeSum / *timeVals * 100.0f / cycleTime;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;            *timeVals = 0;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;            *timeSum = 0;</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;            <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;\tCPU usage: %.2f percent (%5.3f).&quot;</span>, <a class="code" href="classcsl_1_1_i_o.html#a03a3a04552d3c4862dceffdc6d513376">mUsage</a>, <a class="code" href="classcsl_1_1_i_o.html#a531db5245d57b705379d5949f2d7e24c">maxSampEver</a>);</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;<span class="comment">//          logMsg(&quot;\tIO: %d active clients&quot;, ((Mixer *) mGraph)-&gt;activeSources());</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;<span class="comment">//          unsigned num_instruments = library.size();</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;<span class="comment">//          for (unsigned i = 0; i &lt; num_instruments; i++) {</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;<span class="comment">//              Instrument * instr = library[i];</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;<span class="comment">//              if (instr-&gt;graph()-&gt;isActive())</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;<span class="comment">//                  logMsg(&quot;\t\tInstrument %s.%d&quot;, instr-&gt;name().c_str(), i);</span></div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;<span class="comment">//          }</span></div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        }</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    } <span class="keywordflow">else</span> {                                <span class="comment">// count blocks with active sounds and sum exec. times</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        *timeVals += 1;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        *timeSum += <a class="code" href="_c_s_l___core_8h.html#ab904bef5bcd1fe5ff43223a1a0c11101">SUB_TIMES</a>(now, then);</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    }</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    <span class="comment">// cerr &lt;&lt; &quot;here now/this: &quot; &lt;&lt; now-&gt;tvSec &lt;&lt; &quot; &quot; &lt;&lt; then-&gt;tvSec &lt;&lt; endl;</span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;}</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;<span class="comment">// Answer the most recent input buffer</span></div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div>
<div class="line"><a name="l01517"></a><span class="lineno"><a class="line" href="classcsl_1_1_i_o.html#a26120896d8ce56c89443dbcd6f110ed9"> 1517</a></span>&#160;<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; <a class="code" href="classcsl_1_1_i_o.html#a26120896d8ce56c89443dbcd6f110ed9">IO::getInput</a>() throw(<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classcsl_1_1_i_o.html#a26120896d8ce56c89443dbcd6f110ed9">getInput</a>(<a class="code" href="classcsl_1_1_i_o.html#a688331f6e9a2b1356f545d2ace55f41a">mInputBuffer</a>.<a class="code" href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">mNumFrames</a>, <a class="code" href="classcsl_1_1_i_o.html#a688331f6e9a2b1356f545d2ace55f41a">mInputBuffer</a>.<a class="code" href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">mNumChannels</a>);</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;}</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;<span class="comment">// really get the desired format of input</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;</div>
<div class="line"><a name="l01523"></a><span class="lineno"><a class="line" href="classcsl_1_1_i_o.html#a8a206f11032ad9cda1b9c8202b8f06e8"> 1523</a></span>&#160;<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> &amp; <a class="code" href="classcsl_1_1_i_o.html#a26120896d8ce56c89443dbcd6f110ed9">IO::getInput</a>(<span class="keywordtype">unsigned</span> numFrames, <span class="keywordtype">unsigned</span> numChannels) <span class="keywordflow">throw</span>(<a class="code" href="classcsl_1_1_c_exception.html">CException</a>) {</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="_c_gestalt_8cpp.html#a22de467cbe5c4aa7c6ceda1d61d9369f">mNumInChannels</a> == 0)</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        <span class="keywordflow">throw</span> <a class="code" href="classcsl_1_1_i_o_error.html">IOError</a>(<span class="stringliteral">&quot;Can&#39;t get unopened input&quot;</span>);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    <span class="keywordflow">if</span> (mInterleaved) {</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        <a class="code" href="classcsl_1_1_interleaver.html">Interleaver</a> interleaver;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        interleaver.<a class="code" href="classcsl_1_1_interleaver.html#a03eae89a87ec9a72bae6496b3f1fa02c">deinterleave</a>(mInputBuffer, mInputPointer, numFrames, numChannels);</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        mInputBuffer.mIsPopulated = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    }</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    <span class="keywordflow">return</span>(mInputBuffer);</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;}</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;<span class="comment">// begin output capture</span></div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;</div>
<div class="line"><a name="l01536"></a><span class="lineno"><a class="line" href="classcsl_1_1_i_o.html#a33d3dfbf6b9de273c70491e4ed3540c0"> 1536</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_i_o.html#a33d3dfbf6b9de273c70491e4ed3540c0">IO::capture_on</a>(<span class="keywordtype">float</span> dur) {</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <a class="code" href="classcsl_1_1_i_o.html#a795d3c1ee90a4cdcd802b4592beb97d4">mCaptureBuffer</a>.<a class="code" href="classcsl_1_1_buffer.html#a8c25c9f605b0cdebd4626bf4795b286d">setSize</a>(<a class="code" href="classcsl_1_1_i_o.html#aa384e814fb13e794b11f6ece70c37f21">mNumOutChannels</a>, (<span class="keywordtype">unsigned</span>)(dur * <a class="code" href="classcsl_1_1_c_gestalt.html#a888542479f14417d3546278bcde01756">CGestalt::frameRateF</a>()));</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <a class="code" href="classcsl_1_1_i_o.html#a795d3c1ee90a4cdcd802b4592beb97d4">mCaptureBuffer</a>.<a class="code" href="classcsl_1_1_buffer.html#a6880eea0019e9ebf7a61ce542e52a23a">allocateBuffers</a>();</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <a class="code" href="classcsl_1_1_i_o.html#a34133e4a0b4c142541f11fc67c1d76fc">mOffset</a> = 0;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;}</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;<span class="comment">// begin output capture</span></div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;</div>
<div class="line"><a name="l01544"></a><span class="lineno"><a class="line" href="classcsl_1_1_i_o.html#a29d83e9b6fc2610ea3cbac33588b9dcf"> 1544</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_i_o.html#a29d83e9b6fc2610ea3cbac33588b9dcf">IO::capture_off</a>() {</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <a class="code" href="classcsl_1_1_i_o.html#a795d3c1ee90a4cdcd802b4592beb97d4">mCaptureBuffer</a>.<a class="code" href="classcsl_1_1_buffer.html#a8c25c9f605b0cdebd4626bf4795b286d">setSize</a>(1, 0);</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;}</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;<span class="comment">// answer the capture buffer</span></div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;</div>
<div class="line"><a name="l01550"></a><span class="lineno"><a class="line" href="classcsl_1_1_i_o.html#a0ce9f71e62551b921a17869f0d4ea3c8"> 1550</a></span>&#160;<a class="code" href="classcsl_1_1_buffer.html">Buffer</a> * <a class="code" href="classcsl_1_1_i_o.html#a0ce9f71e62551b921a17869f0d4ea3c8">IO::get_capture</a>() {</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    <span class="keywordflow">return</span> &amp; <a class="code" href="classcsl_1_1_i_o.html#a795d3c1ee90a4cdcd802b4592beb97d4">mCaptureBuffer</a>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;}</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;<span class="comment">// IO Device</span></div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div>
<div class="line"><a name="l01556"></a><span class="lineno"><a class="line" href="classcsl_1_1_i_o_device.html#aee06799813fd956c507e44cbec0eb73d"> 1556</a></span>&#160;<a class="code" href="classcsl_1_1_i_o_device.html#a7831e1f6f36cff12be6d5d1271839952">IODevice::IODevice</a>(<span class="keywordtype">char</span> * name, <span class="keywordtype">unsigned</span> index, <span class="keywordtype">unsigned</span> maxIn, <span class="keywordtype">unsigned</span> maxOut, <span class="keywordtype">bool</span> isIn, <span class="keywordtype">bool</span> isOut)</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;            : mIndex(index), mMaxInputChannels(maxIn), mMaxOutputChannels(maxOut),</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;                mIsDefaultIn(isIn), mIsDefaultOut(isOut) {</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;        strcpy(<a class="code" href="classcsl_1_1_i_o_device.html#a52900ed8c2f2e1a4f644239ea3e007d5">mName</a>, name);</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;}</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;</div>
<div class="line"><a name="l01562"></a><span class="lineno"><a class="line" href="classcsl_1_1_i_o_device.html#a972a528fe20807e34837ac9116b74c11"> 1562</a></span>&#160;<a class="code" href="classcsl_1_1_i_o_device.html#a7831e1f6f36cff12be6d5d1271839952">IODevice::IODevice</a>(<span class="keywordtype">string</span> name, <span class="keywordtype">unsigned</span> index, <span class="keywordtype">unsigned</span> maxIn, <span class="keywordtype">unsigned</span> maxOut, <span class="keywordtype">bool</span> isIn, <span class="keywordtype">bool</span> isOut)</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;            : mIndex(index), mMaxInputChannels(maxIn), mMaxOutputChannels(maxOut),</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;                mIsDefaultIn(isIn), mIsDefaultOut(isOut) {</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;        strcpy(<a class="code" href="classcsl_1_1_i_o_device.html#a52900ed8c2f2e1a4f644239ea3e007d5">mName</a>, name.c_str());</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;}</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;<span class="comment">// pretty-print an IO Device</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;</div>
<div class="line"><a name="l01570"></a><span class="lineno"><a class="line" href="classcsl_1_1_i_o_device.html#a78fe85f81bbdff966bb17adc12b27e3a"> 1570</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classcsl_1_1_i_o_device.html#a78fe85f81bbdff966bb17adc12b27e3a">IODevice::dump</a>() {</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    <a class="code" href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">logMsg</a>(<span class="stringliteral">&quot;    IO: %d = %s - %d i %d o %g Hz%s%s&quot;</span>,</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;            <a class="code" href="classcsl_1_1_i_o_device.html#aeb6688872a52d6109245bbf0b0481937">mIndex</a>,</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;            <a class="code" href="classcsl_1_1_i_o_device.html#a52900ed8c2f2e1a4f644239ea3e007d5">mName</a>,</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;            <a class="code" href="classcsl_1_1_i_o_device.html#a990f116e68f887e11002bb82b21d4d6f">mMaxInputChannels</a>, <a class="code" href="classcsl_1_1_i_o_device.html#a4f1665259826c4a3d774b591e508e210">mMaxOutputChannels</a>,</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;            <a class="code" href="classcsl_1_1_i_o_device.html#a0b06d3a79165788378e01b57e4e20745">mFrameRate</a>,</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;            (<a class="code" href="classcsl_1_1_i_o_device.html#af07fea35e60b5f48d21281f433ae2208">mIsDefaultIn</a> ? <span class="stringliteral">&quot; - def in&quot;</span> : <span class="stringliteral">&quot;&quot;</span>),</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;            (<a class="code" href="classcsl_1_1_i_o_device.html#a37645a7e4040de7261239475c204e453">mIsDefaultOut</a> ? <span class="stringliteral">&quot; - def out&quot;</span> : <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;}</div>
<div class="ttc" id="namespacecsl_html_a2e5ffaea3f06948bf8e7a26295dca9d5"><div class="ttname"><a href="namespacecsl.html#a2e5ffaea3f06948bf8e7a26295dca9d5">csl::SampleBuffer</a></div><div class="ttdeci">sample * SampleBuffer</div><div class="ttdoc">1-channel buffer data type, vector of (sample) </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___types_8h_source.html#l00194">CSL_Types.h:194</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a06b97a72515ead21060b2b76ff46714c"><div class="ttname"><a href="classcsl_1_1_buffer.html#a06b97a72515ead21060b2b76ff46714c">csl::Buffer::mAreBuffersZero</a></div><div class="ttdeci">bool mAreBuffersZero</div><div class="ttdoc">have the buffers been zeroed out? </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00123">CSL_Core.h:123</a></div></div>
<div class="ttc" id="namespacecsl_html_a7ef740bb89a5ccd885a745334c83e36d"><div class="ttname"><a href="namespacecsl.html#a7ef740bb89a5ccd885a745334c83e36d">csl::logMsg</a></div><div class="ttdeci">void logMsg(const char *format,...)</div><div class="ttdoc">These are the public logging messages. </div><div class="ttdef"><b>Definition:</b> <a href="_c_gestalt_8cpp_source.html#l00292">CGestalt.cpp:292</a></div></div>
<div class="ttc" id="_c_s_l___types_8h_html_aed3b634395b2c92161cb228bccf540e0"><div class="ttname"><a href="_c_s_l___types_8h.html#aed3b634395b2c92161cb228bccf540e0">CSL_FREQUENCY</a></div><div class="ttdeci">#define CSL_FREQUENCY</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___types_8h_source.html#l00278">CSL_Types.h:278</a></div></div>
<div class="ttc" id="classcsl_1_1_effect_html_a5bd3114c6d08f9b438c5ecccd833cddc"><div class="ttname"><a href="classcsl_1_1_effect.html#a5bd3114c6d08f9b438c5ecccd833cddc">csl::Effect::pullInput</a></div><div class="ttdeci">void pullInput(Buffer &amp;outputBuffer)</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01122">CSL_Core.cpp:1122</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_html_a26120896d8ce56c89443dbcd6f110ed9"><div class="ttname"><a href="classcsl_1_1_i_o.html#a26120896d8ce56c89443dbcd6f110ed9">csl::IO::getInput</a></div><div class="ttdeci">virtual Buffer &amp; getInput()</div><div class="ttdoc">Get the current input from the sound card. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01517">CSL_Core.cpp:1517</a></div></div>
<div class="ttc" id="classcsl_1_1_model_html"><div class="ttname"><a href="classcsl_1_1_model.html">csl::Model</a></div><div class="ttdoc">The Model/Observable/Subject class; instances of its subclasses should send themselves, this->changed(some_data); on "relevant" state changes; the code they inherit (from Model) manages updating the list of observer/dependent objects in that they each receive update(some_data); and can access the model-passed data (the model might pass "this"). </div><div class="ttdef"><b>Definition:</b> <a href="_c_gestalt_8h_source.html#l00258">CGestalt.h:258</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a979a1d5845e3e3f4f35d13b8baffdf96"><div class="ttname"><a href="classcsl_1_1_buffer.html#a979a1d5845e3e3f4f35d13b8baffdf96">csl::Buffer::mNumFrames</a></div><div class="ttdeci">unsigned mNumFrames</div><div class="ttdoc">num frames used in each buffer </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00113">CSL_Core.h:113</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_af7132204ccce08b9ae46c5cd0205cb4d"><div class="ttname"><a href="classcsl_1_1_buffer.html#af7132204ccce08b9ae46c5cd0205cb4d">csl::Buffer::samplePtrFor</a></div><div class="ttdeci">virtual SampleBuffer samplePtrFor(unsigned channel, unsigned offset)</div><div class="ttdoc">answer a samp ptr with offset </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00183">CSL_Core.cpp:183</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_device_html_a7831e1f6f36cff12be6d5d1271839952"><div class="ttname"><a href="classcsl_1_1_i_o_device.html#a7831e1f6f36cff12be6d5d1271839952">csl::IODevice::IODevice</a></div><div class="ttdeci">IODevice()</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00817">CSL_Core.h:817</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a3430abf7c9c920e18e50a1a5e436f6f5"><div class="ttname"><a href="classcsl_1_1_buffer.html#a3430abf7c9c920e18e50a1a5e436f6f5">csl::Buffer::setBuffer</a></div><div class="ttdeci">virtual void setBuffer(unsigned bufNum, SampleBuffer sPtr)</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00158">CSL_Core.h:158</a></div></div>
<div class="ttc" id="_c_gestalt_8cpp_html_a7e674ff8cf38619d58d67c5a6fc220fa"><div class="ttname"><a href="_c_gestalt_8cpp.html#a7e674ff8cf38619d58d67c5a6fc220fa">mFrameRate</a></div><div class="ttdeci">static unsigned mFrameRate</div><div class="ttdoc">default sample rate (tested up to 96000) </div><div class="ttdef"><b>Definition:</b> <a href="_c_gestalt_8cpp_source.html#l00032">CGestalt.cpp:32</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a1fa3f4a3ccefa410caccff18bbd5c88d"><div class="ttname"><a href="classcsl_1_1_buffer.html#a1fa3f4a3ccefa410caccff18bbd5c88d">csl::Buffer::convertRate</a></div><div class="ttdeci">csl::Status convertRate(int fromRate, int toRate)</div><div class="ttdoc">convert the sample rate using libSampleRate </div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_ab26d21f23ceef4a964ac381b9274ff09"><div class="ttname"><a href="classcsl_1_1_buffer.html#ab26d21f23ceef4a964ac381b9274ff09">csl::Buffer::mAreBuffersAllocated</a></div><div class="ttdeci">bool mAreBuffersAllocated</div><div class="ttdoc">are the buffers allocated? </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00120">CSL_Core.h:120</a></div></div>
<div class="ttc" id="namespacecsl_html_ab643cfedf47a3924126b5ff703eae29ba196bb6b87762914aaada00b2e2eae238"><div class="ttname"><a href="namespacecsl.html#ab643cfedf47a3924126b5ff703eae29ba196bb6b87762914aaada00b2e2eae238">csl::kExpand</a></div><div class="ttdoc">call monoNextBuffer multiple times </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00212">CSL_Core.h:212</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_device_html_af07fea35e60b5f48d21281f433ae2208"><div class="ttname"><a href="classcsl_1_1_i_o_device.html#af07fea35e60b5f48d21281f433ae2208">csl::IODevice::mIsDefaultIn</a></div><div class="ttdeci">bool mIsDefaultIn</div><div class="ttdoc">am i the default in? </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00827">CSL_Core.h:827</a></div></div>
<div class="ttc" id="namespacecsl_html_a440dbcbda1bbc58f088ae31dfbcb3f67a4a3159bbf70e3934011566b8051080d3"><div class="ttname"><a href="namespacecsl.html#a440dbcbda1bbc58f088ae31dfbcb3f67a4a3159bbf70e3934011566b8051080d3">csl::kIONew</a></div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00721">CSL_Core.h:721</a></div></div>
<div class="ttc" id="namespacecsl_html"><div class="ttname"><a href="namespacecsl.html">csl</a></div><div class="ttdoc">Convolver.h  The way-simplified convolution class. This is an FFT-based convolver that uses the Nay...</div><div class="ttdef"><b>Definition:</b> <a href="_c_r_a_m___service_8h_source.html#l00040">CRAM_Service.h:40</a></div></div>
<div class="ttc" id="classcsl_1_1_unit_generator_html_ab0421f1e05e97b6ab6c4a667a54843b3"><div class="ttname"><a href="classcsl_1_1_unit_generator.html#ab0421f1e05e97b6ab6c4a667a54843b3">csl::UnitGenerator::handleFanOut</a></div><div class="ttdeci">void handleFanOut(Buffer &amp;outputBuffer)</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00713">CSL_Core.cpp:713</a></div></div>
<div class="ttc" id="classcsl_1_1_effect_html"><div class="ttname"><a href="classcsl_1_1_effect.html">csl::Effect</a></div><div class="ttdoc">Effect  mix-in for classes that have unit generators as inputs (like filters). </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00466">CSL_Core.h:466</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_html_a7cca2bf79735626d7ab93684554e0bff"><div class="ttname"><a href="classcsl_1_1_i_o.html#a7cca2bf79735626d7ab93684554e0bff">csl::IO::pullInput</a></div><div class="ttdeci">void pullInput(Buffer &amp;outBuffer, SampleBuffer out=0)</div><div class="ttdoc">get a buffer from the CSL graph </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01425">CSL_Core.cpp:1425</a></div></div>
<div class="ttc" id="classcsl_1_1_interleaver_html"><div class="ttname"><a href="classcsl_1_1_interleaver.html">csl::Interleaver</a></div><div class="ttdoc">Interleaver handles copying interleaved sample buffers (like sound files and inter-process sockets) t...</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00672">CSL_Core.h:672</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_html_a531db5245d57b705379d5949f2d7e24c"><div class="ttname"><a href="classcsl_1_1_i_o.html#a531db5245d57b705379d5949f2d7e24c">csl::IO::maxSampEver</a></div><div class="ttdeci">float maxSampEver</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00805">CSL_Core.h:805</a></div></div>
<div class="ttc" id="classcsl_1_1_splitter_html_a755b03cdd8699bdd2607685e7566f62d"><div class="ttname"><a href="classcsl_1_1_splitter.html#a755b03cdd8699bdd2607685e7566f62d">csl::Splitter::Splitter</a></div><div class="ttdeci">Splitter(UnitGenerator &amp;in)</div><div class="ttdoc">Constructor. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01184">CSL_Core.cpp:1184</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a3d120398cd5ef4f1fb5ecc63d826d966"><div class="ttname"><a href="classcsl_1_1_buffer.html#a3d120398cd5ef4f1fb5ecc63d826d966">csl::Buffer::copyHeaderFrom</a></div><div class="ttdeci">void copyHeaderFrom(Buffer &amp;source)</div><div class="ttdoc">copy the "header" fields of a buffer </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00235">CSL_Core.cpp:235</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_device_html_aeb6688872a52d6109245bbf0b0481937"><div class="ttname"><a href="classcsl_1_1_i_o_device.html#aeb6688872a52d6109245bbf0b0481937">csl::IODevice::mIndex</a></div><div class="ttdeci">unsigned mIndex</div><div class="ttdoc">index (API-specific) </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00822">CSL_Core.h:822</a></div></div>
<div class="ttc" id="classcsl_1_1_seekable_html_a879b7ddb825a6ce724a08c4631f25e4f"><div class="ttname"><a href="classcsl_1_1_seekable.html#a879b7ddb825a6ce724a08c4631f25e4f">csl::Seekable::seekTo</a></div><div class="ttdeci">virtual unsigned seekTo(int position, SeekPosition whence)=0</div><div class="ttdoc">general-purpose seek on a stream </div></div>
<div class="ttc" id="classcsl_1_1_port_html_a2cfb70a4b6d730e715042d646ec1d960"><div class="ttname"><a href="classcsl_1_1_port.html#a2cfb70a4b6d730e715042d646ec1d960">csl::Port::Port</a></div><div class="ttdeci">Port()</div><div class="ttdoc">Constructors: default is a float = 0. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00766">CSL_Core.cpp:766</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_af447a9071024c8dbcaa11c8070f51836"><div class="ttname"><a href="classcsl_1_1_buffer.html#af447a9071024c8dbcaa11c8070f51836">csl::Buffer::canStore</a></div><div class="ttdeci">bool canStore(unsigned numFrames)</div><div class="ttdoc">answer whether the recevei can store numFrames more frames </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00197">CSL_Core.cpp:197</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_device_html_a52900ed8c2f2e1a4f644239ea3e007d5"><div class="ttname"><a href="classcsl_1_1_i_o_device.html#a52900ed8c2f2e1a4f644239ea3e007d5">csl::IODevice::mName</a></div><div class="ttdeci">char mName[CSL_NAME_LEN]</div><div class="ttdoc">public members </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00821">CSL_Core.h:821</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_device_html_a37645a7e4040de7261239475c204e453"><div class="ttname"><a href="classcsl_1_1_i_o_device.html#a37645a7e4040de7261239475c204e453">csl::IODevice::mIsDefaultOut</a></div><div class="ttdeci">bool mIsDefaultOut</div><div class="ttdoc">am i the default out? </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00828">CSL_Core.h:828</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a59b8743e4a5f731bdd0c4185c9ef263b"><div class="ttname"><a href="classcsl_1_1_buffer.html#a59b8743e4a5f731bdd0c4185c9ef263b">csl::Buffer::~Buffer</a></div><div class="ttdeci">virtual ~Buffer()</div><div class="ttdoc">Destructor de-allocated. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00059">CSL_Core.cpp:59</a></div></div>
<div class="ttc" id="classcsl_1_1_port_html_a437e9e615217b7d3c305d933852d7d5a"><div class="ttname"><a href="classcsl_1_1_port.html#a437e9e615217b7d3c305d933852d7d5a">csl::Port::resetPtr</a></div><div class="ttdeci">void resetPtr()</div><div class="ttdoc">reset the buffer pointer without re-pulling the input </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00811">CSL_Core.cpp:811</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_html_afc645076ff45980d4b9d8c2209f55850"><div class="ttname"><a href="classcsl_1_1_i_o.html#afc645076ff45980d4b9d8c2209f55850">csl::IO::mSequence</a></div><div class="ttdeci">unsigned mSequence</div><div class="ttdoc">sequence counter </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00785">CSL_Core.h:785</a></div></div>
<div class="ttc" id="_c_s_l___types_8h_html_aa8b5c287842dfb1623ab53ea83c8a285"><div class="ttname"><a href="_c_s_l___types_8h.html#aa8b5c287842dfb1623ab53ea83c8a285">csl_max</a></div><div class="ttdeci">#define csl_max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___types_8h_source.html#l00296">CSL_Types.h:296</a></div></div>
<div class="ttc" id="classcsl_1_1_run_time_error_html"><div class="ttname"><a href="classcsl_1_1_run_time_error.html">csl::RunTimeError</a></div><div class="ttdoc">Illegal operation at run time. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___exceptions_8h_source.html#l00090">CSL_Exceptions.h:90</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_ab05a54225ae97f9ed1ae30bbbc0fd14c"><div class="ttname"><a href="classcsl_1_1_buffer.html#ab05a54225ae97f9ed1ae30bbbc0fd14c">csl::Buffer::buffer</a></div><div class="ttdeci">virtual SampleBuffer buffer(unsigned bufNum)</div><div class="ttdoc">convenience accessors for sample buffers </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00066">CSL_Core.cpp:66</a></div></div>
<div class="ttc" id="classcsl_1_1_effect_html_a841ade4126d16430eccbc3ecc3ff5142"><div class="ttname"><a href="classcsl_1_1_effect.html#a841ade4126d16430eccbc3ecc3ff5142">csl::Effect::isActive</a></div><div class="ttdeci">virtual bool isActive()</div><div class="ttdoc">am I active? </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01105">CSL_Core.cpp:1105</a></div></div>
<div class="ttc" id="namespacecsl_html_ac2c2565225bd914df34848bfcc5517f6aaa59f61470af66f345ad160987eca8c2"><div class="ttname"><a href="namespacecsl.html#ac2c2565225bd914df34848bfcc5517f6aaa59f61470af66f345ad160987eca8c2">csl::kOk</a></div><div class="ttdoc">"OK" return status </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___exceptions_8h_source.html#l00035">CSL_Exceptions.h:35</a></div></div>
<div class="ttc" id="classcsl_1_1_port_html_a63b60f57376c48608cb179ae4233e406"><div class="ttname"><a href="classcsl_1_1_port.html#a63b60f57376c48608cb179ae4233e406">csl::Port::dump</a></div><div class="ttdeci">void dump()</div><div class="ttdoc">pretty-print the receiver </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00827">CSL_Core.cpp:827</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_html_a297e157c9f133ea1d9face8f08165478"><div class="ttname"><a href="classcsl_1_1_i_o.html#a297e157c9f133ea1d9face8f08165478">csl::IO::mLoggingPeriod</a></div><div class="ttdeci">unsigned mLoggingPeriod</div><div class="ttdoc">logging period in seconds </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00786">CSL_Core.h:786</a></div></div>
<div class="ttc" id="classcsl_1_1_phased_html_afe7582eb05093c556892ca954c08d9c1"><div class="ttname"><a href="classcsl_1_1_phased.html#afe7582eb05093c556892ca954c08d9c1">csl::Phased::Phased</a></div><div class="ttdeci">Phased()</div><div class="ttdoc">Constructors; this one is rearely used. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00956">CSL_Core.cpp:956</a></div></div>
<div class="ttc" id="classcsl_1_1_port_html_a4bf9fd0b4c3fcc5e6868c824f71d508a"><div class="ttname"><a href="classcsl_1_1_port.html#a4bf9fd0b4c3fcc5e6868c824f71d508a">csl::Port::mValue</a></div><div class="ttdeci">float mValue</div><div class="ttdoc">my value (in case I&#39;m fixed [mUGen == NULL]) </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00322">CSL_Core.h:322</a></div></div>
<div class="ttc" id="_sound_file_l_8h_html"><div class="ttname"><a href="_sound_file_l_8h.html">SoundFileL.h</a></div></div>
<div class="ttc" id="classcsl_1_1_port_html_aadc0f6f06cf07f9e282403eeb87cec98"><div class="ttname"><a href="classcsl_1_1_port.html#aadc0f6f06cf07f9e282403eeb87cec98">csl::Port::mPtrIncrement</a></div><div class="ttdeci">unsigned mPtrIncrement</div><div class="ttdoc">the inter-sample ptr increment (0 for const, 1 for dynamic) </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00324">CSL_Core.h:324</a></div></div>
<div class="ttc" id="classcsl_1_1_unit_generator_html_ac552ea0ee58637e985321ed62920003a"><div class="ttname"><a href="classcsl_1_1_unit_generator.html#ac552ea0ee58637e985321ed62920003a">csl::UnitGenerator::addOutput</a></div><div class="ttdeci">void addOutput(UnitGenerator *ugen)</div><div class="ttdoc">add to or return the UGen vector of outputs </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00670">CSL_Core.cpp:670</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a36b0e60af8a42fcd821c7f920387111c"><div class="ttname"><a href="classcsl_1_1_buffer.html#a36b0e60af8a42fcd821c7f920387111c">csl::Buffer::copyOnlySamplesFrom</a></div><div class="ttdeci">void copyOnlySamplesFrom(Buffer &amp;src)</div><div class="ttdoc">import data from the given buffer </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00286">CSL_Core.cpp:286</a></div></div>
<div class="ttc" id="classcsl_1_1_unit_generator_html_a8656302c00027e557a14e3f2f9f024fc"><div class="ttname"><a href="classcsl_1_1_unit_generator.html#a8656302c00027e557a14e3f2f9f024fc">csl::UnitGenerator::mOutputCache</a></div><div class="ttdeci">Buffer * mOutputCache</div><div class="ttdoc">my past output ring buffer (only used in case of fan-out) </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00296">CSL_Core.h:296</a></div></div>
<div class="ttc" id="classcsl_1_1_effect_html_a4dae74244f59936a49847da9217b4126"><div class="ttname"><a href="classcsl_1_1_effect.html#a4dae74244f59936a49847da9217b4126">csl::Effect::Effect</a></div><div class="ttdeci">Effect()</div><div class="ttdoc">Constructors. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01088">CSL_Core.cpp:1088</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a2bdd2120125a9b00a40aafe6d7fe3c65"><div class="ttname"><a href="classcsl_1_1_buffer.html#a2bdd2120125a9b00a40aafe6d7fe3c65">csl::Buffer::copyFrom</a></div><div class="ttdeci">void copyFrom(Buffer &amp;src)</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00250">CSL_Core.cpp:250</a></div></div>
<div class="ttc" id="classcsl_1_1_c_gestalt_html_a888542479f14417d3546278bcde01756"><div class="ttname"><a href="classcsl_1_1_c_gestalt.html#a888542479f14417d3546278bcde01756">csl::CGestalt::frameRateF</a></div><div class="ttdeci">static float frameRateF()</div><div class="ttdoc">default frame rate as a float </div><div class="ttdef"><b>Definition:</b> <a href="_c_gestalt_8cpp_source.html#l00052">CGestalt.cpp:52</a></div></div>
<div class="ttc" id="classcsl_1_1_unit_generator_html_ac2e590724c0a93b36ba2e9932930a2aa"><div class="ttname"><a href="classcsl_1_1_unit_generator.html#ac2e590724c0a93b36ba2e9932930a2aa">csl::UnitGenerator::nextBuffer</a></div><div class="ttdeci">virtual void nextBuffer(Buffer &amp;outputBuffer)</div><div class="ttdoc">get a buffer of Frames  this is the core CSL "pull" function; the given buffer can be written into...</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00726">CSL_Core.cpp:726</a></div></div>
<div class="ttc" id="classcsl_1_1_fan_out_html_a8c4c9515dfcbd824f58186ba25e8bbc1"><div class="ttname"><a href="classcsl_1_1_fan_out.html#a8c4c9515dfcbd824f58186ba25e8bbc1">csl::FanOut::FanOut</a></div><div class="ttdeci">FanOut(UnitGenerator &amp;in, unsigned taps)</div><div class="ttdoc">Constructors. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01155">CSL_Core.cpp:1155</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a24c3994dfe73ba91980273ab3ccf0fa6"><div class="ttname"><a href="classcsl_1_1_buffer.html#a24c3994dfe73ba91980273ab3ccf0fa6">csl::Buffer::freeBuffers</a></div><div class="ttdeci">void freeBuffers()</div><div class="ttdoc">fcn to free them </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00141">CSL_Core.cpp:141</a></div></div>
<div class="ttc" id="classcsl_1_1_port_html_a6c979cd2b9c4d7dd363869a0df0474e4"><div class="ttname"><a href="classcsl_1_1_port.html#a6c979cd2b9c4d7dd363869a0df0474e4">csl::Port::isActive</a></div><div class="ttdeci">virtual bool isActive()</div><div class="ttdoc">answer whether I&#39;m active </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00818">CSL_Core.cpp:818</a></div></div>
<div class="ttc" id="classcsl_1_1_interleaver_html_a03eae89a87ec9a72bae6496b3f1fa02c"><div class="ttname"><a href="classcsl_1_1_interleaver.html#a03eae89a87ec9a72bae6496b3f1fa02c">csl::Interleaver::deinterleave</a></div><div class="ttdeci">void deinterleave(Buffer &amp;output, SampleBuffer samples, unsigned numFrames, unsigned numChannels)</div><div class="ttdoc">De-interleave = copy from interleaved SampleBuffer to CSL Buffer object. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01337">CSL_Core.cpp:1337</a></div></div>
<div class="ttc" id="classcsl_1_1_seekable_html_a28b5bad4f2349398de3c6d09304fef4c"><div class="ttname"><a href="classcsl_1_1_seekable.html#a28b5bad4f2349398de3c6d09304fef4c">csl::Seekable::reset</a></div><div class="ttdeci">virtual void reset()</div><div class="ttdoc">reset-to-zero </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01277">CSL_Core.cpp:1277</a></div></div>
<div class="ttc" id="_c_s_l___core_8h_html_a90d5947d135344a0bb399047f0ffc890"><div class="ttname"><a href="_c_s_l___core_8h.html#a90d5947d135344a0bb399047f0ffc890">GET_TIME</a></div><div class="ttdeci">#define GET_TIME(val)</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00700">CSL_Core.h:700</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_adffa7078fa839efa88302a238e0ba8f8"><div class="ttname"><a href="classcsl_1_1_buffer.html#adffa7078fa839efa88302a238e0ba8f8">csl::Buffer::zeroBuffers</a></div><div class="ttdeci">void zeroBuffers()</div><div class="ttdoc">fill all data with 0 </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00173">CSL_Core.cpp:173</a></div></div>
<div class="ttc" id="classcsl_1_1_c_gestalt_html"><div class="ttname"><a href="classcsl_1_1_c_gestalt.html">csl::CGestalt</a></div><div class="ttdoc">The CSL system defaults class. </div><div class="ttdef"><b>Definition:</b> <a href="_c_gestalt_8h_source.html#l00039">CGestalt.h:39</a></div></div>
<div class="ttc" id="classcsl_1_1_logic_error_html"><div class="ttname"><a href="classcsl_1_1_logic_error.html">csl::LogicError</a></div><div class="ttdoc">Impossible operation. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___exceptions_8h_source.html#l00099">CSL_Exceptions.h:99</a></div></div>
<div class="ttc" id="classcsl_1_1_unit_generator_html_ae1172496abefc5458c0034bb72be2b73"><div class="ttname"><a href="classcsl_1_1_unit_generator.html#ae1172496abefc5458c0034bb72be2b73">csl::UnitGenerator::dump</a></div><div class="ttdeci">virtual void dump()</div><div class="ttdoc">pretty-print the receiver </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00693">CSL_Core.cpp:693</a></div></div>
<div class="ttc" id="classcsl_1_1_scalable_html_aee5e93b96e4c029bb1129c5f21af6feb"><div class="ttname"><a href="classcsl_1_1_scalable.html#aee5e93b96e4c029bb1129c5f21af6feb">csl::Scalable::~Scalable</a></div><div class="ttdeci">~Scalable()</div><div class="ttdoc">Destructor. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01031">CSL_Core.cpp:1031</a></div></div>
<div class="ttc" id="_c_s_l___core_8h_html"><div class="ttname"><a href="_c_s_l___core_8h.html">CSL_Core.h</a></div></div>
<div class="ttc" id="classcsl_1_1_c_exception_html_a82f57e285f07ca934823977ed3d364e3"><div class="ttname"><a href="classcsl_1_1_c_exception.html#a82f57e285f07ca934823977ed3d364e3">csl::CException::mMessage</a></div><div class="ttdeci">string mMessage</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___exceptions_8h_source.html#l00053">CSL_Exceptions.h:53</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a8c25c9f605b0cdebd4626bf4795b286d"><div class="ttname"><a href="classcsl_1_1_buffer.html#a8c25c9f605b0cdebd4626bf4795b286d">csl::Buffer::setSize</a></div><div class="ttdeci">void setSize(unsigned numChannels, unsigned numFrames)</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00075">CSL_Core.cpp:75</a></div></div>
<div class="ttc" id="classcsl_1_1_fan_out_html_a7d6ba642afac2f3704f2cb24696116f7"><div class="ttname"><a href="classcsl_1_1_fan_out.html#a7d6ba642afac2f3704f2cb24696116f7">csl::FanOut::mNumFanOuts</a></div><div class="ttdeci">unsigned mNumFanOuts</div><div class="ttdoc">the number of outputs </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00625">CSL_Core.h:625</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a02736ff701cce46d3225804b09903686"><div class="ttname"><a href="classcsl_1_1_buffer.html#a02736ff701cce46d3225804b09903686">csl::Buffer::mBuffers</a></div><div class="ttdeci">SampleBufferVector mBuffers</div><div class="ttdoc">the storage vector  pointers to (SampleBuffer) buffers </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00182">CSL_Core.h:182</a></div></div>
<div class="ttc" id="namespacecsl_html_ac5e77b55f839f35209cc64fd74d363d3"><div class="ttname"><a href="namespacecsl.html#ac5e77b55f839f35209cc64fd74d363d3">csl::CSL_MAP_KEY</a></div><div class="ttdeci">unsigned CSL_MAP_KEY</div><div class="ttdoc">Forward declaration. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___types_8h_source.html#l00233">CSL_Types.h:233</a></div></div>
<div class="ttc" id="classcsl_1_1_controllable_html"><div class="ttname"><a href="classcsl_1_1_controllable.html">csl::Controllable</a></div><div class="ttdoc">Controllable  superclass of the mix-ins that add control or signal inputs. This holds onto a map of...</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00371">CSL_Core.h:371</a></div></div>
<div class="ttc" id="classcsl_1_1_scalable_html_aff7c94c6f4dd75f322866500464c3739"><div class="ttname"><a href="classcsl_1_1_scalable.html#aff7c94c6f4dd75f322866500464c3739">csl::Scalable::setOffset</a></div><div class="ttdeci">void setOffset(UnitGenerator &amp;offset)</div><div class="ttdoc">set the receiver&#39;s offset member to a UGen or a float </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01053">CSL_Core.cpp:1053</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a649b8659887a82739a1cf4c57c731a18"><div class="ttname"><a href="classcsl_1_1_buffer.html#a649b8659887a82739a1cf4c57c731a18">csl::Buffer::mMonoBufferByteSize</a></div><div class="ttdeci">unsigned mMonoBufferByteSize</div><div class="ttdoc">size of each buffer in bytes </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00115">CSL_Core.h:115</a></div></div>
<div class="ttc" id="classcsl_1_1_unit_generator_html_a560ed71245bfa740cec9fcd42210f5e1"><div class="ttname"><a href="classcsl_1_1_unit_generator.html#a560ed71245bfa740cec9fcd42210f5e1">csl::UnitGenerator::mOutputs</a></div><div class="ttdeci">UGenVector mOutputs</div><div class="ttdoc">the vector of my output UGens </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00294">CSL_Core.h:294</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_html_af8690c5e8a8f34a0b10b74f3cd066063"><div class="ttname"><a href="classcsl_1_1_i_o.html#af8690c5e8a8f34a0b10b74f3cd066063">csl::IO::mGraph</a></div><div class="ttdeci">UnitGenerator * mGraph</div><div class="ttdoc">the root of my client DSP graph, often a mixer or panner </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00777">CSL_Core.h:777</a></div></div>
<div class="ttc" id="classcsl_1_1_unit_generator_html_a18fbfa273518b084b5e18aed48e1ea09"><div class="ttname"><a href="classcsl_1_1_unit_generator.html#a18fbfa273518b084b5e18aed48e1ea09">csl::UnitGenerator::mNumOutputs</a></div><div class="ttdeci">unsigned mNumOutputs</div><div class="ttdoc">the number of outputs </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00295">CSL_Core.h:295</a></div></div>
<div class="ttc" id="classcsl_1_1_memory_error_html"><div class="ttname"><a href="classcsl_1_1_memory_error.html">csl::MemoryError</a></div><div class="ttdoc">Malloc failure subclass. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___exceptions_8h_source.html#l00063">CSL_Exceptions.h:63</a></div></div>
<div class="ttc" id="classcsl_1_1_c_gestalt_html_a307bdedc01034447bd623010a43a51d2"><div class="ttname"><a href="classcsl_1_1_c_gestalt.html#a307bdedc01034447bd623010a43a51d2">csl::CGestalt::blockSize</a></div><div class="ttdeci">static unsigned blockSize()</div><div class="ttdoc">the default block size </div><div class="ttdef"><b>Definition:</b> <a href="_c_gestalt_8cpp_source.html#l00057">CGestalt.cpp:57</a></div></div>
<div class="ttc" id="classcsl_1_1_interleaver_html_ac6a5443222ca7f3e9b9ba9add9ad8b44"><div class="ttname"><a href="classcsl_1_1_interleaver.html#ac6a5443222ca7f3e9b9ba9add9ad8b44">csl::Interleaver::interleaveAndRemap</a></div><div class="ttdeci">void interleaveAndRemap(Buffer &amp;output, SampleBuffer samples, unsigned numFrames, unsigned numChannels, unsigned *channelMap)</div><div class="ttdoc">Interleave = copy from CSL-style Buffer object to an interleaved sample vector Remap = re-assign chan...</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01319">CSL_Core.cpp:1319</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_device_html_a78fe85f81bbdff966bb17adc12b27e3a"><div class="ttname"><a href="classcsl_1_1_i_o_device.html#a78fe85f81bbdff966bb17adc12b27e3a">csl::IODevice::dump</a></div><div class="ttdeci">void dump()</div><div class="ttdoc">pretty-print the receiver&#39; device </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01570">CSL_Core.cpp:1570</a></div></div>
<div class="ttc" id="classcsl_1_1_unit_generator_html_a059f46216ac25c66303d4a4a0fc05908"><div class="ttname"><a href="classcsl_1_1_unit_generator.html#a059f46216ac25c66303d4a4a0fc05908">csl::UnitGenerator::numChannels</a></div><div class="ttdeci">virtual unsigned numChannels()</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00252">CSL_Core.h:252</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_ade047ef82822b88b908f5b653f519b7e"><div class="ttname"><a href="classcsl_1_1_buffer.html#ade047ef82822b88b908f5b653f519b7e">csl::Buffer::mNumChannels</a></div><div class="ttdeci">unsigned mNumChannels</div><div class="ttdoc">num channels in buffer (num mono buffers) </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00112">CSL_Core.h:112</a></div></div>
<div class="ttc" id="classcsl_1_1_unit_generator_html_a14621f54452b97881bacefabe88d914c"><div class="ttname"><a href="classcsl_1_1_unit_generator.html#a14621f54452b97881bacefabe88d914c">csl::UnitGenerator::zeroBuffer</a></div><div class="ttdeci">void zeroBuffer(Buffer &amp;outputBuffer, unsigned outBufNum)</div><div class="ttdoc">utility method to zero out an outputBuffer </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00663">CSL_Core.cpp:663</a></div></div>
<div class="ttc" id="namespacecsl_html_a9c90bbf38f5866df02d02866d23a58ea"><div class="ttname"><a href="namespacecsl.html#a9c90bbf38f5866df02d02866d23a58ea">csl::sample</a></div><div class="ttdeci">float sample</div><div class="ttdoc">(could be changed to int, or double) </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___types_8h_source.html#l00191">CSL_Types.h:191</a></div></div>
<div class="ttc" id="classcsl_1_1_unit_generator_html_a905d2cd8a1d8ac233fdb025d1a545205"><div class="ttname"><a href="classcsl_1_1_unit_generator.html#a905d2cd8a1d8ac233fdb025d1a545205">csl::UnitGenerator::mNumChannels</a></div><div class="ttdeci">unsigned mNumChannels</div><div class="ttdoc">my "expected" number of output channels </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00292">CSL_Core.h:292</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_device_html_a0b06d3a79165788378e01b57e4e20745"><div class="ttname"><a href="classcsl_1_1_i_o_device.html#a0b06d3a79165788378e01b57e4e20745">csl::IODevice::mFrameRate</a></div><div class="ttdeci">float mFrameRate</div><div class="ttdoc">current SR </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00825">CSL_Core.h:825</a></div></div>
<div class="ttc" id="classcsl_1_1_joiner_html_ab68c6ad73067d37f7c93c2676297266d"><div class="ttname"><a href="classcsl_1_1_joiner.html#ab68c6ad73067d37f7c93c2676297266d">csl::Joiner::nextBuffer</a></div><div class="ttdeci">virtual void nextBuffer(Buffer &amp;outputBuffer)</div><div class="ttdoc">nextBuffer processes joiner channels </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01240">CSL_Core.cpp:1240</a></div></div>
<div class="ttc" id="classcsl_1_1_scalable_html_abf64a4db13b4b7fc2393b05a809456a6"><div class="ttname"><a href="classcsl_1_1_scalable.html#abf64a4db13b4b7fc2393b05a809456a6">csl::Scalable::Scalable</a></div><div class="ttdeci">Scalable()</div><div class="ttdoc">Constructors. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00991">CSL_Core.cpp:991</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a2f0cf286d7d9f91b4459e3a81a8c58df"><div class="ttname"><a href="classcsl_1_1_buffer.html#a2f0cf286d7d9f91b4459e3a81a8c58df">csl::Buffer::mType</a></div><div class="ttdeci">BufferContentType mType</div><div class="ttdoc">Data type flag set the internal size variables (no buffer allocation takes place) ...</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00124">CSL_Core.h:124</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a7312fd854f77139838e66310d68884b1"><div class="ttname"><a href="classcsl_1_1_buffer.html#a7312fd854f77139838e66310d68884b1">csl::Buffer::rms</a></div><div class="ttdeci">float rms(unsigned chan, unsigned from, unsigned to)</div><div class="ttdoc">Buffer Sample Processing (optional). One could also easily add Buffer operators, such as (Buffer + Bu...</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00465">CSL_Core.cpp:465</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a271e468fd7db8b019219d59dda7191a5"><div class="ttname"><a href="classcsl_1_1_buffer.html#a271e468fd7db8b019219d59dda7191a5">csl::Buffer::setSizeOnly</a></div><div class="ttdeci">void setSizeOnly(unsigned numChannels, unsigned numFrames)</div><div class="ttdoc">this version doesn&#39;t even allocate the pointers </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00099">CSL_Core.cpp:99</a></div></div>
<div class="ttc" id="_c_s_l___types_8h_html_a4c47debb150e171f9020cf9b3b6cfae0"><div class="ttname"><a href="_c_s_l___types_8h.html#a4c47debb150e171f9020cf9b3b6cfae0">CSL_INPUT</a></div><div class="ttdeci">#define CSL_INPUT</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___types_8h_source.html#l00275">CSL_Types.h:275</a></div></div>
<div class="ttc" id="_c_s_l___core_8h_html_ab904bef5bcd1fe5ff43223a1a0c11101"><div class="ttname"><a href="_c_s_l___core_8h.html#ab904bef5bcd1fe5ff43223a1a0c11101">SUB_TIMES</a></div><div class="ttdeci">#define SUB_TIMES(t1, t2)</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00701">CSL_Core.h:701</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_html_a795d3c1ee90a4cdcd802b4592beb97d4"><div class="ttname"><a href="classcsl_1_1_i_o.html#a795d3c1ee90a4cdcd802b4592beb97d4">csl::IO::mCaptureBuffer</a></div><div class="ttdeci">Buffer mCaptureBuffer</div><div class="ttdoc">the output buffer I use for capturing output (for testing) </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00780">CSL_Core.h:780</a></div></div>
<div class="ttc" id="classcsl_1_1_joiner_html_a3cef8b62225ed147ab21adcf05211699"><div class="ttname"><a href="classcsl_1_1_joiner.html#a3cef8b62225ed147ab21adcf05211699">csl::Joiner::isActive</a></div><div class="ttdeci">bool isActive()</div><div class="ttdoc">am I active? </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01225">CSL_Core.cpp:1225</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_ae82190fb16006a36bbf610942e174098"><div class="ttname"><a href="classcsl_1_1_buffer.html#ae82190fb16006a36bbf610942e174098">csl::Buffer::max</a></div><div class="ttdeci">float max(unsigned chan, unsigned from, unsigned to)</div><div class="ttdoc">get the max of the absolute val of the samples </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00495">CSL_Core.cpp:495</a></div></div>
<div class="ttc" id="classcsl_1_1_fan_out_html_a4b130e104c39c1e285912cd8c0f3fa52"><div class="ttname"><a href="classcsl_1_1_fan_out.html#a4b130e104c39c1e285912cd8c0f3fa52">csl::FanOut::nextBuffer</a></div><div class="ttdeci">virtual void nextBuffer(Buffer &amp;outputBuffer)</div><div class="ttdoc">get a buffer of Frames  this is the core CSL "pull" function; the given buffer can be written into...</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01168">CSL_Core.cpp:1168</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_ae67b75acbd22cf2e99dcd94a4828c5a6"><div class="ttname"><a href="classcsl_1_1_buffer.html#ae67b75acbd22cf2e99dcd94a4828c5a6">csl::Buffer::mNumAlloc</a></div><div class="ttdeci">unsigned mNumAlloc</div><div class="ttdoc">num frames in each buffer </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00114">CSL_Core.h:114</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a07f4f503cc7850d8899dcde1a311f0ff"><div class="ttname"><a href="classcsl_1_1_buffer.html#a07f4f503cc7850d8899dcde1a311f0ff">csl::Buffer::min</a></div><div class="ttdeci">float min(unsigned chan, unsigned from, unsigned to)</div><div class="ttdoc">get the min of the samples </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00509">CSL_Core.cpp:509</a></div></div>
<div class="ttc" id="classcsl_1_1_phased_html_ac5ebcc5aaf42ae7f230b37cde1cf1080"><div class="ttname"><a href="classcsl_1_1_phased.html#ac5ebcc5aaf42ae7f230b37cde1cf1080">csl::Phased::~Phased</a></div><div class="ttdeci">~Phased()</div><div class="ttdoc">Destructor. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00977">CSL_Core.cpp:977</a></div></div>
<div class="ttc" id="classcsl_1_1_unit_generator_html_ae17d9b2638d6ba280f8b8de87e5ac071"><div class="ttname"><a href="classcsl_1_1_unit_generator.html#ae17d9b2638d6ba280f8b8de87e5ac071">csl::UnitGenerator::isActive</a></div><div class="ttdeci">virtual bool isActive()</div><div class="ttdoc">query whether I&#39;m currently active (Envelopes can go inactive) </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00273">CSL_Core.h:273</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a2985567420be118187e5d4010aa37833"><div class="ttname"><a href="classcsl_1_1_buffer.html#a2985567420be118187e5d4010aa37833">csl::Buffer::copySamplesFrom</a></div><div class="ttdeci">void copySamplesFrom(Buffer &amp;src)</div><div class="ttdoc">import data from the given buffer </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00270">CSL_Core.cpp:270</a></div></div>
<div class="ttc" id="classcsl_1_1_joiner_html_a7c3fe07f9921302b9f2bdbb8b59d559a"><div class="ttname"><a href="classcsl_1_1_joiner.html#a7c3fe07f9921302b9f2bdbb8b59d559a">csl::Joiner::trigger</a></div><div class="ttdeci">virtual void trigger()</div><div class="ttdoc">trigger passed on here </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01258">CSL_Core.cpp:1258</a></div></div>
<div class="ttc" id="classcsl_1_1_effect_html_acb98ee8f880bfdf7019273d869042bc4"><div class="ttname"><a href="classcsl_1_1_effect.html#acb98ee8f880bfdf7019273d869042bc4">csl::Effect::trigger</a></div><div class="ttdeci">virtual void trigger()</div><div class="ttdoc">trigger passed on here get the input port </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01148">CSL_Core.cpp:1148</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_ab1c9511087c61dea57e2a8700a6de823"><div class="ttname"><a href="classcsl_1_1_buffer.html#ab1c9511087c61dea57e2a8700a6de823">csl::Buffer::copySamplesFromTo</a></div><div class="ttdeci">void copySamplesFromTo(Buffer &amp;src, unsigned offset)</div><div class="ttdoc">same with write offset </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00300">CSL_Core.cpp:300</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_device_html_a990f116e68f887e11002bb82b21d4d6f"><div class="ttname"><a href="classcsl_1_1_i_o_device.html#a990f116e68f887e11002bb82b21d4d6f">csl::IODevice::mMaxInputChannels</a></div><div class="ttdeci">unsigned mMaxInputChannels</div><div class="ttdoc">HW ins</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00823">CSL_Core.h:823</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a46dc1ed83826fc590a7f8551f9f59932"><div class="ttname"><a href="classcsl_1_1_buffer.html#a46dc1ed83826fc590a7f8551f9f59932">csl::Buffer::scaleBy</a></div><div class="ttdeci">void scaleBy(sample value)</div><div class="ttdoc">scale the samples by the given value </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00219">CSL_Core.cpp:219</a></div></div>
<div class="ttc" id="_sound_file_j_8h_html"><div class="ttname"><a href="_sound_file_j_8h.html">SoundFileJ.h</a></div></div>
<div class="ttc" id="classcsl_1_1_port_html_a81c5f3efaa9f2a4251a55e289d37a722"><div class="ttname"><a href="classcsl_1_1_port.html#a81c5f3efaa9f2a4251a55e289d37a722">csl::Port::checkBuffer</a></div><div class="ttdeci">void checkBuffer()</div><div class="ttdoc">check the port&#39;s buffer and allocate it if needed </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00796">CSL_Core.cpp:796</a></div></div>
<div class="ttc" id="_c_s_l___core_8cpp_html_aff1ac57c0322123d7fbf7f9c65d30af0"><div class="ttname"><a href="_c_s_l___core_8cpp.html#aff1ac57c0322123d7fbf7f9c65d30af0">gIODevices</a></div><div class="ttdeci">vector&lt; IODevice * &gt; gIODevices</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01387">CSL_Core.cpp:1387</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a3176af0f95b2544ae3f74b38fcb0defe"><div class="ttname"><a href="classcsl_1_1_buffer.html#a3176af0f95b2544ae3f74b38fcb0defe">csl::Buffer::fillWith</a></div><div class="ttdeci">void fillWith(sample value)</div><div class="ttdoc">fill data with the given value </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00203">CSL_Core.cpp:203</a></div></div>
<div class="ttc" id="classcsl_1_1_effect_html_a5aa7e299971049551d91d262e5d07c9a"><div class="ttname"><a href="classcsl_1_1_effect.html#a5aa7e299971049551d91d262e5d07c9a">csl::Effect::setInput</a></div><div class="ttdeci">void setInput(UnitGenerator &amp;inp)</div><div class="ttdoc">set the receiver&#39;s input generator </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01112">CSL_Core.cpp:1112</a></div></div>
<div class="ttc" id="classcsl_1_1_scalable_html_aea1b11dc8b91188467f2406cc50e4c10"><div class="ttname"><a href="classcsl_1_1_scalable.html#aea1b11dc8b91188467f2406cc50e4c10">csl::Scalable::trigger</a></div><div class="ttdeci">virtual void trigger()</div><div class="ttdoc">trigger passed on here </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01069">CSL_Core.cpp:1069</a></div></div>
<div class="ttc" id="classcsl_1_1_joiner_html_a501ec2a025f7a4098e343ce3316dcb19"><div class="ttname"><a href="classcsl_1_1_joiner.html#a501ec2a025f7a4098e343ce3316dcb19">csl::Joiner::Joiner</a></div><div class="ttdeci">Joiner()</div><div class="ttdoc">< loop through my vector of inputs </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00650">CSL_Core.h:650</a></div></div>
<div class="ttc" id="_c_gestalt_8cpp_html_a22de467cbe5c4aa7c6ceda1d61d9369f"><div class="ttname"><a href="_c_gestalt_8cpp.html#a22de467cbe5c4aa7c6ceda1d61d9369f">mNumInChannels</a></div><div class="ttdeci">static unsigned mNumInChannels</div><div class="ttdoc">The actual start-up values are defined in CSL_Types.h. </div><div class="ttdef"><b>Definition:</b> <a href="_c_gestalt_8cpp_source.html#l00029">CGestalt.cpp:29</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_html_a34133e4a0b4c142541f11fc67c1d76fc"><div class="ttname"><a href="classcsl_1_1_i_o.html#a34133e4a0b4c142541f11fc67c1d76fc">csl::IO::mOffset</a></div><div class="ttdeci">unsigned mOffset</div><div class="ttdoc">used for capture offset </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00793">CSL_Core.h:793</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_html_aa384e814fb13e794b11f6ece70c37f21"><div class="ttname"><a href="classcsl_1_1_i_o.html#aa384e814fb13e794b11f6ece70c37f21">csl::IO::mNumOutChannels</a></div><div class="ttdeci">unsigned mNumOutChannels</div><div class="ttdoc">outputs</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00788">CSL_Core.h:788</a></div></div>
<div class="ttc" id="classcsl_1_1_splitter_html_a0dbd021da14039d2414d1b976f42b33f"><div class="ttname"><a href="classcsl_1_1_splitter.html#a0dbd021da14039d2414d1b976f42b33f">csl::Splitter::nextBuffer</a></div><div class="ttdeci">virtual void nextBuffer(Buffer &amp;outputBuffer)</div><div class="ttdoc">I&#39;m mono nextBuffer processes splitter channels. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01194">CSL_Core.cpp:1194</a></div></div>
<div class="ttc" id="_c_s_l___types_8h_html_ae8ec6a68799a96c76a1e37d9632fda38"><div class="ttname"><a href="_c_s_l___types_8h.html#ae8ec6a68799a96c76a1e37d9632fda38">csl_min</a></div><div class="ttdeci">#define csl_min(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___types_8h_source.html#l00292">CSL_Types.h:292</a></div></div>
<div class="ttc" id="namespacecsl_html_ac2c2565225bd914df34848bfcc5517f6"><div class="ttname"><a href="namespacecsl.html#ac2c2565225bd914df34848bfcc5517f6">csl::Status</a></div><div class="ttdeci">Status</div><div class="ttdoc">CSL status flags (for return values) </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___exceptions_8h_source.html#l00034">CSL_Exceptions.h:34</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_error_html"><div class="ttname"><a href="classcsl_1_1_i_o_error.html">csl::IOError</a></div><div class="ttdoc">IO Error. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___exceptions_8h_source.html#l00126">CSL_Exceptions.h:126</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_html_a29d83e9b6fc2610ea3cbac33588b9dcf"><div class="ttname"><a href="classcsl_1_1_i_o.html#a29d83e9b6fc2610ea3cbac33588b9dcf">csl::IO::capture_off</a></div><div class="ttdeci">virtual void capture_off()</div><div class="ttdoc">end output capture </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01544">CSL_Core.cpp:1544</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_af22d974d9c91cace59a16c3de3f64897"><div class="ttname"><a href="classcsl_1_1_buffer.html#af22d974d9c91cace59a16c3de3f64897">csl::Buffer::checkBuffers</a></div><div class="ttdeci">void checkBuffers()</div><div class="ttdoc">allocate if not already there </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00107">CSL_Core.cpp:107</a></div></div>
<div class="ttc" id="classcsl_1_1_joiner_html_aae3f476894c9ff87f12bc83db3ff2742"><div class="ttname"><a href="classcsl_1_1_joiner.html#aae3f476894c9ff87f12bc83db3ff2742">csl::Joiner::addInput</a></div><div class="ttdeci">void addInput(UnitGenerator &amp;in)</div><div class="ttdoc">add the argument to vector of inputs </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01220">CSL_Core.cpp:1220</a></div></div>
<div class="ttc" id="namespacecsl_html_ab643cfedf47a3924126b5ff703eae29baa9e680ac8d474993f51fe6cf33797807"><div class="ttname"><a href="namespacecsl.html#ab643cfedf47a3924126b5ff703eae29baa9e680ac8d474993f51fe6cf33797807">csl::kCopy</a></div><div class="ttdoc">compute 1 channel and copy </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00211">CSL_Core.h:211</a></div></div>
<div class="ttc" id="classcsl_1_1_port_html_afea3a01573e6eb5ef24915c0b33555d0"><div class="ttname"><a href="classcsl_1_1_port.html#afea3a01573e6eb5ef24915c0b33555d0">csl::Port::mUGen</a></div><div class="ttdeci">UnitGenerator * mUGen</div><div class="ttdoc">my unit generator (pointer or NULL) </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00320">CSL_Core.h:320</a></div></div>
<div class="ttc" id="classcsl_1_1_unit_generator_html_a6c5fcdaa7a0a59b426fd23dc7b1a1ab7"><div class="ttname"><a href="classcsl_1_1_unit_generator.html#a6c5fcdaa7a0a59b426fd23dc7b1a1ab7">csl::UnitGenerator::~UnitGenerator</a></div><div class="ttdeci">virtual ~UnitGenerator()</div><div class="ttdoc">Destructor. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00659">CSL_Core.cpp:659</a></div></div>
<div class="ttc" id="classcsl_1_1_port_html_a91a70fce4e5e9b9252668b430949677d"><div class="ttname"><a href="classcsl_1_1_port.html#a91a70fce4e5e9b9252668b430949677d">csl::Port::mBuffer</a></div><div class="ttdeci">Buffer * mBuffer</div><div class="ttdoc">the buffer used to hold my output </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00321">CSL_Core.h:321</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_html_adc6975037c1beec8dadf8f4bb1405549"><div class="ttname"><a href="classcsl_1_1_i_o.html#adc6975037c1beec8dadf8f4bb1405549">csl::IO::printTimeStatistics</a></div><div class="ttdeci">void printTimeStatistics(struct timeval *tthen, struct timeval *tnow, long *tsecond, long *ttimeSum, long *ttimeVals)</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01486">CSL_Core.cpp:1486</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a918fcf7dae9b05fdbfd16ec773f2a3a3"><div class="ttname"><a href="classcsl_1_1_buffer.html#a918fcf7dae9b05fdbfd16ec773f2a3a3">csl::Buffer::duration</a></div><div class="ttdeci">float duration()</div><div class="ttdoc">answer the buffer&#39;s duration in seconds </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00114">CSL_Core.cpp:114</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_device_html_a4f1665259826c4a3d774b591e508e210"><div class="ttname"><a href="classcsl_1_1_i_o_device.html#a4f1665259826c4a3d774b591e508e210">csl::IODevice::mMaxOutputChannels</a></div><div class="ttdeci">unsigned mMaxOutputChannels</div><div class="ttdoc">HW outs</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00824">CSL_Core.h:824</a></div></div>
<div class="ttc" id="classcsl_1_1_phased_html_a8b7cc24c72115c7d8cbdf6511665184a"><div class="ttname"><a href="classcsl_1_1_phased.html#a8b7cc24c72115c7d8cbdf6511665184a">csl::Phased::setFrequency</a></div><div class="ttdeci">void setFrequency(UnitGenerator &amp;frequency)</div><div class="ttdoc">Setter accessors. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00981">CSL_Core.cpp:981</a></div></div>
<div class="ttc" id="_c_s_l___types_8h_html_ac2aae4f821f0e6851e6e4add9a1fd630"><div class="ttname"><a href="_c_s_l___types_8h.html#ac2aae4f821f0e6851e6e4add9a1fd630">CSL_OFFSET</a></div><div class="ttdeci">#define CSL_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___types_8h_source.html#l00274">CSL_Types.h:274</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a48700df48c6455e36e6e43a2a1ec10ca"><div class="ttname"><a href="classcsl_1_1_buffer.html#a48700df48c6455e36e6e43a2a1ec10ca">csl::Buffer::mDidIAllocateBuffers</a></div><div class="ttdeci">bool mDidIAllocateBuffers</div><div class="ttdoc">who allocated my data buffers? </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00121">CSL_Core.h:121</a></div></div>
<div class="ttc" id="namespacecsl_html_abac90833d4619f34250e6a669ff127c7a32856b6dbfa48d010094cd39ef0ebdb7"><div class="ttname"><a href="namespacecsl.html#abac90833d4619f34250e6a669ff127c7a32856b6dbfa48d010094cd39ef0ebdb7">csl::kLogError</a></div><div class="ttdef"><b>Definition:</b> <a href="_c_gestalt_8h_source.html#l00157">CGestalt.h:157</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_html_a0cd73786ea896b62cf0ec3e3e0367dd8"><div class="ttname"><a href="classcsl_1_1_i_o.html#a0cd73786ea896b62cf0ec3e3e0367dd8">csl::IO::setRoot</a></div><div class="ttdeci">void setRoot(UnitGenerator &amp;root)</div><div class="ttdoc">set/clear my graph root generator </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01405">CSL_Core.cpp:1405</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_html_a8d8936fa9d9812c1d9c5787edb8d55d4"><div class="ttname"><a href="classcsl_1_1_i_o.html#a8d8936fa9d9812c1d9c5787edb8d55d4">csl::IO::IO</a></div><div class="ttdeci">IO(unsigned s_rate=44100, unsigned b_size=CSL_mBlockSize, int in_device=-1, int out_device=-1, unsigned in_chans=2, unsigned out_chans=2)</div><div class="ttdoc">superclass = Model </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01393">CSL_Core.cpp:1393</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html"><div class="ttname"><a href="classcsl_1_1_buffer.html">csl::Buffer</a></div><div class="ttdoc">Buffer  the multi-channel sample buffer class (passed around between generators and IO guys)...</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00106">CSL_Core.h:106</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_ab8aa749635753645f17d7bfa17d1ed95"><div class="ttname"><a href="classcsl_1_1_buffer.html#ab8aa749635753645f17d7bfa17d1ed95">csl::Buffer::avg</a></div><div class="ttdeci">float avg(unsigned chan, unsigned from, unsigned to)</div><div class="ttdoc">get the average of the samples </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00483">CSL_Core.cpp:483</a></div></div>
<div class="ttc" id="classcsl_1_1_port_html_a47055191ec4fec00b3ca51659d6fdf85"><div class="ttname"><a href="classcsl_1_1_port.html#a47055191ec4fec00b3ca51659d6fdf85">csl::Port::mValuePtr</a></div><div class="ttdeci">float * mValuePtr</div><div class="ttdoc">my value&#39;s address (const or buffer pointer) </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00323">CSL_Core.h:323</a></div></div>
<div class="ttc" id="classcsl_1_1_port_html_afe166c2a6b10ad34d47472a150366bc1"><div class="ttname"><a href="classcsl_1_1_port.html#afe166c2a6b10ad34d47472a150366bc1">csl::Port::~Port</a></div><div class="ttdeci">virtual ~Port()</div><div class="ttdoc">Destructor. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00789">CSL_Core.cpp:789</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_html_a538b273c6de621b2e38266e6216bde1c"><div class="ttname"><a href="classcsl_1_1_i_o.html#a538b273c6de621b2e38266e6216bde1c">csl::IO::clearRoot</a></div><div class="ttdeci">void clearRoot()</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01410">CSL_Core.cpp:1410</a></div></div>
<div class="ttc" id="namespacecsl_html_ab643cfedf47a3924126b5ff703eae29ba8a962be1944af47bcefc32855c5268d9"><div class="ttname"><a href="namespacecsl.html#ab643cfedf47a3924126b5ff703eae29ba8a962be1944af47bcefc32855c5268d9">csl::kIgnore</a></div><div class="ttdoc">ignore extra buffer channels </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00213">CSL_Core.h:213</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_html_a688331f6e9a2b1356f545d2ace55f41a"><div class="ttname"><a href="classcsl_1_1_i_o.html#a688331f6e9a2b1356f545d2ace55f41a">csl::IO::mInputBuffer</a></div><div class="ttdeci">Buffer mInputBuffer</div><div class="ttdoc">the most recent input buffer (if it&#39;s turned on) </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00778">CSL_Core.h:778</a></div></div>
<div class="ttc" id="_sound_file_c_a_8h_html"><div class="ttname"><a href="_sound_file_c_a_8h.html">SoundFileCA.h</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a27cd634184b30949bb567f9cde4d803b"><div class="ttname"><a href="classcsl_1_1_buffer.html#a27cd634184b30949bb567f9cde4d803b">csl::Buffer::normalize</a></div><div class="ttdeci">float normalize(float maxVal)</div><div class="ttdoc">normalize the buffer(s) to the given max; answer the prior max </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00348">CSL_Core.cpp:348</a></div></div>
<div class="ttc" id="classcsl_1_1_controllable_html_a97af0aab15f5bd707c672dd450b630e6"><div class="ttname"><a href="classcsl_1_1_controllable.html#a97af0aab15f5bd707c672dd450b630e6">csl::Controllable::getPort</a></div><div class="ttdeci">Port * getPort(CSL_MAP_KEY name)</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00920">CSL_Core.cpp:920</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a6880eea0019e9ebf7a61ce542e52a23a"><div class="ttname"><a href="classcsl_1_1_buffer.html#a6880eea0019e9ebf7a61ce542e52a23a">csl::Buffer::allocateBuffers</a></div><div class="ttdeci">void allocateBuffers()</div><div class="ttdoc">fcn to malloc storage buffers </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00122">CSL_Core.cpp:122</a></div></div>
<div class="ttc" id="classcsl_1_1_unit_generator_html_ae26eb0bfea17ced109bb5301b83eedd3"><div class="ttname"><a href="classcsl_1_1_unit_generator.html#ae26eb0bfea17ced109bb5301b83eedd3">csl::UnitGenerator::checkFanOut</a></div><div class="ttdeci">bool checkFanOut(Buffer &amp;outputBuffer)</div><div class="ttdoc">check for fan-out and copy previous buffer; return true if fanning out </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00699">CSL_Core.cpp:699</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_html_a03a3a04552d3c4862dceffdc6d513376"><div class="ttname"><a href="classcsl_1_1_i_o.html#a03a3a04552d3c4862dceffdc6d513376">csl::IO::mUsage</a></div><div class="ttdeci">float mUsage</div><div class="ttdoc">cpu usage % print the CPU usage message </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00798">CSL_Core.h:798</a></div></div>
<div class="ttc" id="classcsl_1_1_port_html"><div class="ttname"><a href="classcsl_1_1_port.html">csl::Port</a></div><div class="ttdoc">Port  used to represent constant, control-rate or signal inputs and outputs in named maps; holds a ...</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00312">CSL_Core.h:312</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a002adaad8e1a1d0d94cc0472fa1c33ca"><div class="ttname"><a href="classcsl_1_1_buffer.html#a002adaad8e1a1d0d94cc0472fa1c33ca">csl::Buffer::readFromFile</a></div><div class="ttdeci">bool readFromFile(char *fname)</div><div class="ttdoc">read a buffer from a snd file; answer success </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00315">CSL_Core.cpp:315</a></div></div>
<div class="ttc" id="classcsl_1_1_controllable_html_ab3e6d0af15e7f824a15782e8c57e15d1"><div class="ttname"><a href="classcsl_1_1_controllable.html#ab3e6d0af15e7f824a15782e8c57e15d1">csl::Controllable::addInput</a></div><div class="ttdeci">void addInput(CSL_MAP_KEY name, UnitGenerator &amp;ugen)</div><div class="ttdoc">Plug in a unit generator to the named input slot. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00894">CSL_Core.cpp:894</a></div></div>
<div class="ttc" id="classcsl_1_1_unit_generator_html_a33dc32beaa3144b33c7b3c639be2e5ed"><div class="ttname"><a href="classcsl_1_1_unit_generator.html#a33dc32beaa3144b33c7b3c639be2e5ed">csl::UnitGenerator::removeOutput</a></div><div class="ttdeci">void removeOutput(UnitGenerator *ugen)</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00680">CSL_Core.cpp:680</a></div></div>
<div class="ttc" id="classcsl_1_1_controllable_html_aaa6da76a70b9f21f265024c185485832"><div class="ttname"><a href="classcsl_1_1_controllable.html#aaa6da76a70b9f21f265024c185485832">csl::Controllable::mInputs</a></div><div class="ttdeci">PortMap mInputs</div><div class="ttdoc">the map of my inputs or controls (used by the mix-in classes) </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00378">CSL_Core.h:378</a></div></div>
<div class="ttc" id="classcsl_1_1_unit_generator_html"><div class="ttname"><a href="classcsl_1_1_unit_generator.html">csl::UnitGenerator</a></div><div class="ttdoc">forward declaration </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00241">CSL_Core.h:241</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_a95f21039ad600c844f3ba7e5ae421d47"><div class="ttname"><a href="classcsl_1_1_buffer.html#a95f21039ad600c844f3ba7e5ae421d47">csl::Buffer::Buffer</a></div><div class="ttdeci">Buffer(unsigned numChannels=1, unsigned numFrames=CSL_mBlockSize)</div><div class="ttdoc">Constructor: default is mono and default-size. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00042">CSL_Core.cpp:42</a></div></div>
<div class="ttc" id="namespacecsl_html_ad581b11596079b5e108e260d8480380ca007f48e136a6bcf5ee1caa803182b2a5"><div class="ttname"><a href="namespacecsl.html#ad581b11596079b5e108e260d8480380ca007f48e136a6bcf5ee1caa803182b2a5">csl::kPositionStart</a></div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00561">CSL_Core.h:561</a></div></div>
<div class="ttc" id="classcsl_1_1_effect_html_ac9437c85619fd68d0816e328b2a33e05"><div class="ttname"><a href="classcsl_1_1_effect.html#ac9437c85619fd68d0816e328b2a33e05">csl::Effect::isInline</a></div><div class="ttdeci">bool isInline</div><div class="ttdoc">whether to use input or buffer as source </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00475">CSL_Core.h:475</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_c_map_html_a4b87bf16ad480aed824ec8acba5808d0"><div class="ttname"><a href="classcsl_1_1_buffer_c_map.html#a4b87bf16ad480aed824ec8acba5808d0">csl::BufferCMap::~BufferCMap</a></div><div class="ttdeci">~BufferCMap()</div><div class="ttdoc">Destructor. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00635">CSL_Core.cpp:635</a></div></div>
<div class="ttc" id="_c_s_l___types_8h_html_a8395ee6986cbf72d7ffa2a1d465ff7b1"><div class="ttname"><a href="_c_s_l___types_8h.html#a8395ee6986cbf72d7ffa2a1d465ff7b1">CSL_SCALE</a></div><div class="ttdeci">#define CSL_SCALE</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___types_8h_source.html#l00273">CSL_Types.h:273</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_html_af2075a50a32bf0cfddae3183b37e0959"><div class="ttname"><a href="classcsl_1_1_i_o.html#af2075a50a32bf0cfddae3183b37e0959">csl::IO::getAndIncrementSequence</a></div><div class="ttdeci">unsigned getAndIncrementSequence()</div><div class="ttdoc">increment and answer my seq # </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01418">CSL_Core.cpp:1418</a></div></div>
<div class="ttc" id="_tests_2_o_s_c_2_o_s_c__support_8cpp_html_a055a6ba75f8e5b442ae70a56e2f85bf6"><div class="ttname"><a href="_tests_2_o_s_c_2_o_s_c__support_8cpp.html#a055a6ba75f8e5b442ae70a56e2f85bf6">error</a></div><div class="ttdeci">void error(int num, const char *m, const char *path)</div><div class="ttdef"><b>Definition:</b> <a href="_tests_2_o_s_c_2_o_s_c__support_8cpp_source.html#l00070">OSC_support.cpp:70</a></div></div>
<div class="ttc" id="classcsl_1_1_scalable_html_a27258611ca4769ec35e64954e03e5851"><div class="ttname"><a href="classcsl_1_1_scalable.html#a27258611ca4769ec35e64954e03e5851">csl::Scalable::setScale</a></div><div class="ttdeci">void setScale(UnitGenerator &amp;scale)</div><div class="ttdoc">set the receiver&#39;s scale member to a UGen or a float </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01039">CSL_Core.cpp:1039</a></div></div>
<div class="ttc" id="_c_gestalt_8cpp_html_a66f17dbb1cc7a89be03ce3b6a302668a"><div class="ttname"><a href="_c_gestalt_8cpp.html#a66f17dbb1cc7a89be03ce3b6a302668a">mLoggingPeriod</a></div><div class="ttdeci">static unsigned mLoggingPeriod</div><div class="ttdoc">log CPU every 15 sec </div><div class="ttdef"><b>Definition:</b> <a href="_c_gestalt_8cpp_source.html#l00041">CGestalt.cpp:41</a></div></div>
<div class="ttc" id="classcsl_1_1_unit_generator_html_aa7c9698175013a0c8034fb1726a69216"><div class="ttname"><a href="classcsl_1_1_unit_generator.html#aa7c9698175013a0c8034fb1726a69216">csl::UnitGenerator::UnitGenerator</a></div><div class="ttdeci">UnitGenerator(unsigned rate=CGestalt::frameRate(), unsigned chans=1)</div><div class="ttdoc">Constructors (UGens are mono by default) defaults to mono and maxBlockSize if not specified...</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00647">CSL_Core.cpp:647</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_html_a33d3dfbf6b9de273c70491e4ed3540c0"><div class="ttname"><a href="classcsl_1_1_i_o.html#a33d3dfbf6b9de273c70491e4ed3540c0">csl::IO::capture_on</a></div><div class="ttdeci">virtual void capture_on(float dur)</div><div class="ttdoc">test the IO&#39;s graph </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01536">CSL_Core.cpp:1536</a></div></div>
<div class="ttc" id="classcsl_1_1_fan_out_html"><div class="ttname"><a href="classcsl_1_1_fan_out.html">csl::FanOut</a></div><div class="ttdoc">A fan-out generator for DSP graphs with loops. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00615">CSL_Core.h:615</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_c_map_html_a4215af773b98e8618c9486ec012b8a13"><div class="ttname"><a href="classcsl_1_1_buffer_c_map.html#a4215af773b98e8618c9486ec012b8a13">csl::BufferCMap::BufferCMap</a></div><div class="ttdeci">BufferCMap()</div><div class="ttdoc">Constructors: default is useless. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00625">CSL_Core.cpp:625</a></div></div>
<div class="ttc" id="namespacecsl_html_ac2c2565225bd914df34848bfcc5517f6a452950010f4a2bea6156404e12a824d3"><div class="ttname"><a href="namespacecsl.html#ac2c2565225bd914df34848bfcc5517f6a452950010f4a2bea6156404e12a824d3">csl::kErr</a></div><div class="ttdoc">"error" return status </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___exceptions_8h_source.html#l00039">CSL_Exceptions.h:39</a></div></div>
<div class="ttc" id="namespacecsl_html_a5af458483d71530692674c12d94d67e7af150be1bd16d08aba03503029871090d"><div class="ttname"><a href="namespacecsl.html#a5af458483d71530692674c12d94d67e7af150be1bd16d08aba03503029871090d">csl::kSamples</a></div><div class="ttdoc">Regular audio samples. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00072">CSL_Core.h:72</a></div></div>
<div class="ttc" id="classcsl_1_1_writeable_html_a8985abc457cabe1595d704642216b413"><div class="ttname"><a href="classcsl_1_1_writeable.html#a8985abc457cabe1595d704642216b413">csl::Writeable::writeBuffer</a></div><div class="ttdeci">virtual void writeBuffer(Buffer &amp;inputBuffer)</div><div class="ttdoc">write to the receiver </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01269">CSL_Core.cpp:1269</a></div></div>
<div class="ttc" id="classcsl_1_1_controllable_html_ac7b24bdea3a33bdd7cf1bbe266787362"><div class="ttname"><a href="classcsl_1_1_controllable.html#ac7b24bdea3a33bdd7cf1bbe266787362">csl::Controllable::pullInput</a></div><div class="ttdeci">void pullInput(Port *thePort, unsigned numFrames)</div><div class="ttdoc">method to read the control values (in case they&#39;re dynamic). this sends nextBuffer() to the input...</div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00847">CSL_Core.cpp:847</a></div></div>
<div class="ttc" id="classcsl_1_1_interleaver_html_a7d0fe9c9f181585c097a8772a7974c2f"><div class="ttname"><a href="classcsl_1_1_interleaver.html#a7d0fe9c9f181585c097a8772a7974c2f">csl::Interleaver::interleave</a></div><div class="ttdeci">void interleave(Buffer &amp;output, SampleBuffer samples, unsigned numFrames, unsigned numChannels)</div><div class="ttdoc">Interleave = copy from CSL-style Buffer object to an interleaved sample vector. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01285">CSL_Core.cpp:1285</a></div></div>
<div class="ttc" id="_c_gestalt_8cpp_html_afa73767d4305689d41adfab852ba915f"><div class="ttname"><a href="_c_gestalt_8cpp.html#afa73767d4305689d41adfab852ba915f">mNumOutChannels</a></div><div class="ttdeci">static unsigned mNumOutChannels</div><div class="ttdoc">stereo outputs </div><div class="ttdef"><b>Definition:</b> <a href="_c_gestalt_8cpp_source.html#l00030">CGestalt.cpp:30</a></div></div>
<div class="ttc" id="classcsl_1_1_controllable_html_a1055d9ef86c3fd240d4ae1a90ed57531"><div class="ttname"><a href="classcsl_1_1_controllable.html#a1055d9ef86c3fd240d4ae1a90ed57531">csl::Controllable::dump</a></div><div class="ttdeci">virtual void dump()</div><div class="ttdoc">pretty-print the receiver&#39;s input/controls map </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00926">CSL_Core.cpp:926</a></div></div>
<div class="ttc" id="classcsl_1_1_i_o_html_a0ce9f71e62551b921a17869f0d4ea3c8"><div class="ttname"><a href="classcsl_1_1_i_o.html#a0ce9f71e62551b921a17869f0d4ea3c8">csl::IO::get_capture</a></div><div class="ttdeci">virtual Buffer * get_capture()</div><div class="ttdoc">answer the capture buffer </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l01550">CSL_Core.cpp:1550</a></div></div>
<div class="ttc" id="_c_gestalt_8h_html_a6580b20db89e43c9166920172e3ed751"><div class="ttname"><a href="_c_gestalt_8h.html#a6580b20db89e43c9166920172e3ed751">SAFE_MALLOC</a></div><div class="ttdeci">#define SAFE_MALLOC(ptr, type, len)</div><div class="ttdoc">Useful Macros. </div><div class="ttdef"><b>Definition:</b> <a href="_c_gestalt_8h_source.html#l00103">CGestalt.h:103</a></div></div>
<div class="ttc" id="classcsl_1_1_buffer_html_ad29437a569b9ebde64675830c54e313f"><div class="ttname"><a href="classcsl_1_1_buffer.html#ad29437a569b9ebde64675830c54e313f">csl::Buffer::mIsPopulated</a></div><div class="ttdeci">bool mIsPopulated</div><div class="ttdoc">does the buffer have data? </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8h_source.html#l00122">CSL_Core.h:122</a></div></div>
<div class="ttc" id="classcsl_1_1_c_exception_html"><div class="ttname"><a href="classcsl_1_1_c_exception.html">csl::CException</a></div><div class="ttdoc">Base class of CSL exceptions (written upper-case). Has a string message. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___exceptions_8h_source.html#l00051">CSL_Exceptions.h:51</a></div></div>
<div class="ttc" id="classcsl_1_1_controllable_html_a1d14f63552c57bea7cba7e26c744bd40"><div class="ttname"><a href="classcsl_1_1_controllable.html#a1d14f63552c57bea7cba7e26c744bd40">csl::Controllable::~Controllable</a></div><div class="ttdeci">virtual ~Controllable()</div><div class="ttdoc">Constructor takes no arguments. </div><div class="ttdef"><b>Definition:</b> <a href="_c_s_l___core_8cpp_source.html#l00841">CSL_Core.cpp:841</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d0eb551afdf1d2127efcb86a4ad0f906.html">CSL</a></li><li class="navelem"><a class="el" href="dir_c742638c11f8a46b53f21623e5b2a57e.html">Kernel</a></li><li class="navelem"><a class="el" href="_c_s_l___core_8cpp.html">CSL_Core.cpp</a></li>
    <li class="footer">Generated on Wed Apr 15 2020 23:26:38 for CSL by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
